<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>html/tmod/svp/foxPlayer.min.20150615.js - Documenting JavaScript with YUIDoc</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="Documenting JavaScript with YUIDoc" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/BaseApi.html">BaseApi</a></li>
                                <li><a href="../classes/CityApi.html">CityApi</a></li>
                                <li><a href="../classes/clientInfo.html">clientInfo</a></li>
                                <li><a href="../classes/clientUI.html">clientUI</a></li>
                                <li><a href="../classes/detailModules.html">detailModules</a></li>
                                <li><a href="../classes/IndexApi.html">IndexApi</a></li>
                                <li><a href="../classes/listModules.html">listModules</a></li>
                                <li><a href="../classes/phoneSlide.html">phoneSlide</a></li>
                                <li><a href="../classes/Platform.html">Platform</a></li>
                                <li><a href="../classes/testModules.html">testModules</a></li>
                                <li><a href="../classes/userCenter.html">userCenter</a></li>
                                <li><a href="../classes/Utils.html">Utils</a></li>
                                <li><a href="../classes/Widget.html">Widget</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/api.html">api</a></li>
                                <li><a href="../modules/client.html">client</a></li>
                                <li><a href="../modules/device.html">device</a></li>
                                <li><a href="../modules/modules.html">modules</a></li>
                                <li><a href="../modules/nativeUI.html">nativeUI</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: html/tmod/svp/foxPlayer.min.20150615.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/** m.tv.sohu.com, time 20150615 15:24:27, sohu inc */
svp.define(&quot;svp.foxPlayer&quot;,function(a,b,c){window.svp=window.svp||{};var d=a(&quot;base.console&quot;),e=a(&quot;trace.click&quot;);svp.foxPlayer={maxId:1},svp.foxPlayer.ready=function(b){d.log(&quot;发送行为统计点:(play_display)&quot;),e.pingback(null,&quot;play_display&quot;),$(document).ready(function(){var c=svp.$,d=!!document.all&amp;&amp;(&quot;Win32&quot;==navigator.platform||&quot;Win64&quot;==navigator.platform||&quot;Windows&quot;==navigator.platform);d?c.isFunction(b)&amp;&amp;b(a(&quot;player.flash&quot;)):c.isFunction(b)&amp;&amp;b(a(&quot;player.foxPlayer&quot;))})},c.exports=svp.foxPlayer}),svp.define(&quot;adv.android&quot;,function(a,b,c){&quot;use strict&quot;;var d=svp.$,e=a(&quot;base.vars&quot;),f=a(&quot;base.url&quot;),g=a(&quot;base.util&quot;),h=a(&quot;base.cookie&quot;),i=a(&quot;adv.andorid.parseData&quot;),j=a(&quot;player.loadCacheData&quot;),k=a(&quot;trace.click&quot;),l=a(&quot;base.sysMessage&quot;),m=a(&quot;base.action&quot;),n=a(&quot;data.appDownload&quot;),o=a(&quot;base.console&quot;),p=a(&quot;trace.video&quot;),q=d.now(),r=function(a,b){var c={param:{player:null,pauseAdConClass:&quot;svp_ad_pause_&quot;+q,pauseAdCloseBtnClass:&quot;svp_ad_pause_close_&quot;+q,mediaTimerConClass:&quot;svp_poster_ad_time_&quot;+q,mediaTimerClass:&quot;svp_poster_ad_timer_&quot;+q,adDetailBtnClass:&quot;svp_ad_detail_&quot;+q,isPauseAd:!1,mediaAdPlatform:&quot;none&quot;,addAdCallback:null,adClose:&quot;0&quot;,debug:!1,debugCurUrl:&quot;&quot;,timeout:2e3,timeoutFlag:!1,isGetFlag:!1,isValidFlag:!1,isFirstLoad:!0,ps:&quot;&quot;,urls:{adrMedia:&quot;http://m.aty.sohu.com/h&quot;,adrMediaDebug:&quot;http://60.28.168.195/h&quot;,advIframe:&quot;http://m.tv.sohu.com/upload/touch/public/showInIframe_new.html&quot;}},model:{oldAdIndex:0,curAdIndex:-1,sendRepAdIndex:-1,cache:null,appid:&quot;&quot;,mediaAd:{},effMediaData:[],mptIndex:[],videoData:null},view:{},ctrl:{}},r=c.param,s=c.model,t=c.view,u=c.ctrl;r.init=function(a,b){return d.isUndefined(a)?!1:(r.player=a,r=d.merge(r,b),null!==f.getQueryString(&quot;adClose&quot;)&amp;&amp;(r.adClose=f.getQueryString(&quot;adClose&quot;)),null!==f.getQueryString(&quot;ps&quot;)&amp;&amp;(r.ps=f.getQueryString(&quot;ps&quot;)),&quot;0&quot;!==b.adClose&amp;&amp;(r.adClose=b.adClose),r.debug=e.ENABLE_DEBUG,!0)},r.reset=function(){r.timeoutFlag=!1,r.isGetFlag=!1,r.isValidFlag=!1},s.init=function(a,b){s.cache=d.extend(!0,{},a.cache),s.videoData=a.videoData,s.appid=b.appid},s.reset=function(){s.oldAdIndex=0,s.curAdIndex=-1,s.cache=null,s.mediaAd={},s.effMediaData=[],s.mptIndex=[]},s.getQueryAdVideoURL=function(a,b){var c=a.cateCode||a.cate_code||&quot;&quot;,e=[&quot;vid=&quot;+a.vid,&quot;&amp;uid=&quot;+h.get(&quot;SUV&quot;)||&quot;&quot;,&quot;&amp;plat=17&quot;,&quot;&amp;pt=&quot;+g.getUserPt(),&quot;&amp;prod=h5&quot;,&quot;&amp;pg=1&amp;eye=0&quot;,&quot;&amp;cateCode=&quot;+c.split(&quot;;&quot;)[0]||&quot;&quot;,&quot;&amp;advEFId=&quot;+a.advEFId].join(&quot;&quot;);return d.isUndefined(b)||(b+=(b.match(/\?/)?&quot;&amp;&quot;:&quot;?&quot;)+e),b},s.getPlatId=function(){return e.IsAndroidPad?&quot;h0&quot;:e.IsIphone?&quot;h3&quot;:e.IsIpad?&quot;h1&quot;:e.IsAndroid?&quot;h6&quot;:&quot;unknowm&quot;},s.getAdParam=function(a){var b={};return b.pt=&quot;oad&quot;,b.plat=s.getPlatId(),b.sver=&quot;&quot;,b.sysver=e.OsVersion,b.c=&quot;tv&quot;,b.vc=s.getVc(a),b.pn=s.getPn(),b.al=a.plid||a.sid||a.aid||&quot;&quot;,b.du=a.totalDuration||a.duration||a.total_duration||0,b.vid=a.vid||&quot;&quot;,b.tvid=a.tvid||&quot;&quot;,b.tuv=h.get(&quot;MUV&quot;)||h.get(&quot;SUV&quot;)||&quot;&quot;,b.vu=&quot;&quot;,b.prot=&quot;vast&quot;,b.cat=&quot;1&quot;,b.ar=a.areaId||a.area_id||6,b.callback=&quot;getAdsCallback&quot;,b.json=&quot;std&quot;,&quot;0&quot;!==r.adClose&amp;&amp;(b.adClose=r.adClose),b.appid=s.appid,b.pageUrl=window.location.href,b.type=a.site&amp;&amp;2===a.site||a.cid&amp;&amp;&quot;9001&quot;===a.cid?&quot;my&quot;:&quot;vrs&quot;,b.ag=&quot;&quot;,b.st=&quot;&quot;,b.partner=f.getQueryString(&quot;src&quot;)||f.getQueryString(&quot;SRC&quot;)||h.get(&quot;MTV_SRC&quot;)||&quot;-2&quot;,b},s.getVc=function(a){var b=a.cateCode||a.cate_code||a.cid||&quot;&quot;;return b&amp;&amp;b.indexOf(&quot;;&quot;)&gt;-1&amp;&amp;(b=b.replace(/.*?;/,&quot;&quot;)),b},s.getPn=function(){var a=s.getPlatId();return&quot;h6&quot;===a?&quot;androidphone&quot;:&quot;h3&quot;===a?&quot;iphone&quot;:&quot;h16&quot;===a?&quot;androidpad&quot;:&quot;h1&quot;===a?&quot;ipad&quot;:&quot;unknowm&quot;},s.getPauseAdInfo=function(a,b){b({imgUrl:&quot;http://t12.baidu.com/it/u=3602855978,1840777505&amp;fm=56&quot;})},s.pauseAdInfoProcess=function(a){return a},s.sendInnerPingback=function(a,b){if(&quot;undefined&quot;!=typeof a){var c={video_catecode:s.videoData.cateCode&amp;&amp;s.videoData.cateCode.split(&quot;;&quot;)[0]||&quot;&quot;,video_plid:s.videoData.sid||s.videoData.plid||&quot;&quot;,video_dur:s.cache.duration,partner:f.getQueryString(&quot;src&quot;)||f.getQueryString(&quot;SRC&quot;)||h.get(&quot;MTV_SRC&quot;)||&quot;-2&quot;};&quot;video_ad_response&quot;===a?(c.ad_status=1,c.ad_total_num=0,c.ad_empty_num=0,c.ad_eff_num=0,c.ad_total_dur=0):&quot;video_ad_play&quot;===a?(c.ad_is_empty=0,c.ad_total_num=s.mediaAd.realTotalCounts,c.ad_eff_num=s.mediaAd.effCounts):&quot;video_ad_close&quot;===a&amp;&amp;(c.ad_total_num=s.mediaAd.realTotalCounts,c.ad_eff_num=s.mediaAd.effCounts);for(var d in b)c[d]=b[d];o.log(&quot;发送内部行为统计数据 (&quot;+a+&quot;):&quot;,c),k.pingback(null,a,c)}},s.getAndroidAdInfo=function(b,c){var d;r.debug?(d=r.urls.adrMediaDebug+&quot;?&quot;+s.toString(b),o.log(&quot;android广告请求:&quot;+d)):d=r.urls.adrMedia+&quot;?&quot;+s.toString(b),setTimeout(function(){r.isGetFlag||(o.log(&quot;android广告请求超时，直接播放视频&quot;),s.sendInnerPingback(&quot;video_ad_response&quot;),r.timeoutFlag=!0,a.adv.mediaAd=s.androidAdInfoProcess(),u.process.ended())},r.timeout),svp.debug.playerLoadAdDataStartTime=Date.now(),i.getData(d,function(a){a=s.androidAdInfoProcess(a),c(a)})},s.androidAdInfoProcess=function(a){var b={totalDuration:0,urls:{mp4:{nor:[]},downloadUrl:[]},durations:{nor:[]},adDataList:[],adVidList:[],realTotalCounts:0,emptyCounts:0,effCounts:0};if(!d.isUndefined(a)&amp;&amp;a instanceof Array){var c=1,e=1;d.each(a,function(a,f){if(!d.isUndefined(f.videoUrl)){var g={};g.duration=f.duration,g.clickUrl=f.clickUrl,g.vid=f.vid||&quot;&quot;,g.cateCode=s.videoData.cateCode,g.advEFId=&quot;adv_id_&quot;+a,g.counts=parseInt(f.cnt,10)||1,&quot;error&quot;!==f.videoUrl?(g.src=s.getQueryAdVideoURL(g,f.videoUrl),g.effAdPosition=e,e++):(g.src=f.videoUrl,g.effAdPosition=-1,b.emptyCounts+=g.counts),d.isUndefined(f.vid)||&quot;&quot;===f.vid||b.adVidList.push(f.vid);for(var h=[],i=0;i&lt;g.counts;i++)h.push(c+i);c+=g.counts,g.adPosition=h.join(&quot;,&quot;),b.adDataList.push(g),b.urls.mp4.nor.push(g.src),b.durations.nor.push(g.duration),b.realTotalCounts+=g.counts,&quot;number&quot;==typeof g.duration&amp;&amp;(b.totalDuration+=g.duration)}}),b.effCounts=b.realTotalCounts-b.emptyCounts}return b},s.toString=function(a){var b=[];for(var c in a)b.push(c+&quot;=&quot;+encodeURIComponent(a[c]));return b.join(&quot;&amp;&quot;)},s.getEffectiveMediaData=function(a){var b,c=d.extend(!0,{},a);for(b=c.adVidList.length-1;b&gt;=0;b--)&quot;error&quot;===c.adVidList[b]&amp;&amp;c.adVidList.splice(b,1);for(b=c.adDataList.length-1;b&gt;=0;b--){var e=c.adDataList[b];&quot;error&quot;===e.duration&amp;&amp;&quot;error&quot;===e.src&amp;&amp;c.adDataList.splice(b,1)}for(b=c.urls.mp4.nor.length-1;b&gt;=0;b--)c.urls.mp4.nor[b].indexOf(&quot;error&quot;)&gt;-1&amp;&amp;c.urls.mp4.nor.splice(b,1);for(b=c.durations.nor.length-1;b&gt;=0;b--)(c.durations.nor[b]+&quot;&quot;).indexOf(&quot;error&quot;)&gt;-1&amp;&amp;c.durations.nor.splice(b,1);return c},t.pauseAd=function(a){var b=[];return b.push(&#x27;&lt;div class=&quot;ad_pause &#x27;+r.pauseAdConClass+&#x27;&quot; style=&quot;display: none;&quot;&gt;&#x27;),b.push(&#x27;&lt;img src=&quot;&#x27;+a.imgUrl+&#x27;&quot;&gt;&#x27;),b.push(&#x27;&lt;em class=&quot;&#x27;+r.pauseAdCloseBtnClass+&#x27;&quot;&gt;&lt;/em&gt;&#x27;),b.push(&quot;&lt;/div&gt;&quot;),b.join(&quot;&quot;)},t.mediaTimer=function(){var a=[];return a.push(&#x27;&lt;span class=&quot;ad_time &#x27;+r.mediaTimerConClass+&#x27;&quot; style=&quot;display: none;&quot;&gt;&#x27;),a.push(&#x27;&lt;span class=&quot;ad_time_timer &#x27;+r.mediaTimerClass+&#x27;&quot;&gt;&lt;/span&gt;&#x27;),a.push(&#x27;&lt;span class=&quot;ad_remove&quot; position=&quot;appdownload_adRemove&quot;&gt;免费去广告&lt;/span&gt;&#x27;),a.push(&quot;&lt;/span&gt;&quot;),a.join(&quot;&quot;)},t.mediaAdvDetail=function(){var a=[];return a.push(&#x27;&lt;div class=&quot;gg_area &#x27;+r.adDetailBtnClass+&#x27;&quot;&gt;&#x27;),a.push(&#x27;&lt;div class=&quot;ad_detail&quot;&gt;&#x27;),a.push(&quot;详情&quot;),a.push(&quot;&lt;/div&gt;&lt;/div&gt;&quot;),a.join(&quot;&quot;)},u.init=function(a,b){r.init(a,b)&amp;&amp;s.init(a,b)},u.getPauseAdView=function(a){if(r.isPauseAd){var b={};s.getPauseAdInfo(b,function(b){a(t.pauseAd(b))})}else a(&quot;&quot;)},u.getMediaAdView=function(a){if(e.IsAndroid){var b=&quot;&quot;;b+=t.mediaTimer(),&quot;1&quot;!==r.ps&amp;&amp;(b+=t.mediaAdvDetail()),a(b)}else a(&quot;&quot;)},u.showParamAd=function(){r.isPauseAd&amp;&amp;d(&quot;.&quot;+r.pauseAdConClass).show()},u.hideParamAd=function(){r.isPauseAd&amp;&amp;d(&quot;.&quot;+r.pauseAdConClass).hide()},u.getAndroidAdInfo=function(a){var b=s.getAdParam(s.videoData);s.sendInnerPingback(&quot;video_ad_request&quot;),s.getAndroidAdInfo(b,function(b){if(o.log(&quot;广告数据:&quot;,b),!r.timeoutFlag){var c={ad_status:0,ad_total_num:b.realTotalCounts,ad_empty_num:b.emptyCounts,ad_eff_num:b.effCounts,ad_total_dur:b.totalDuration};s.sendInnerPingback(&quot;video_ad_response&quot;,c),r.isGetFlag=!0,0!==b.totalDuration&amp;&amp;(r.isValidFlag=!0),a(b)}})},u.showMediaTimer=function(){d(&quot;.&quot;+r.mediaTimerConClass).css(&quot;display&quot;,&quot;block&quot;)},u.hideMediaView=function(){d(&quot;.&quot;+r.mediaTimerConClass).hide(),d(&quot;.&quot;+r.adDetailBtnClass).hide(),d(&quot;.ad_remove&quot;).hide()},u.updateMediaTimer=function(a){d(&quot;.&quot;+r.mediaTimerClass).html(a)},u.addAdView=function(a){0===d(&quot;.&quot;+r.mediaTimerConClass).length?(r.isPauseAd&amp;&amp;u.getPauseAdView(function(b){a.$main.append(b)}),r.mediaAdPlatform.indexOf(&quot;android&quot;)&gt;-1&amp;&amp;u.getMediaAdView(function(b){a.$main.append(b)})):(d(&quot;.ad_remove&quot;).show(),d(&quot;.&quot;+r.adDetailBtnClass).show())},u.addAdvertise=function(a){var b=r.player;r.addAdCallback=a,u.getAndroidAdInfo(function(a){if(b.adv.mediaAd=a,s.mediaAd=a,&quot;0&quot;===r.adClose){if(a.adDataList.length&gt;0&amp;&amp;o.log(&quot;android广告获取成功&quot;,a),b.duration=a.totalDuration,r.isFirstLoad&amp;&amp;(u.eventInit(),r.isFirstLoad=!1),0===a.adDataList.length)return o.log(&quot;没有获取到android广告贴片内容&quot;),void u.process.ended();if(s.effMediaData=s.getEffectiveMediaData(s.mediaAd),s.effMediaData.adDataList.length&gt;0){var c=b.config;c.isMediaAdContent=!0,c.modeType=&quot;nor&quot;,s.effMediaData.srcType=&quot;mp4&quot;,b.cache=new j(c,s.effMediaData),b.setSrc(b.cache.curPlayUrl),u.addAdView(b),u.updateMediaTimer(b.cache.duration),u.showMediaTimer(),b._firstLoadFlag=!0,b.play()}else s.curAdIndex=s.mediaAd.adDataList.length-1,d.each(s.mediaAd.adDataList,function(a,b){o.log(&quot;发送android空广告上报 cIndex:&quot;+a),i.trackempty(a);var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};s.sendInnerPingback(&quot;video_ad_play&quot;,c)}),u.process.ended()}else o.log(&quot;android广告已经获取成功，但是广告被屏蔽&quot;),s.sendInnerPingback(&quot;video_ad_close&quot;),u.process.ended()})},u.emptyAdCheckAndReport=function(a){var b=a.cache.curPlayUrl;d.each(s.mediaAd.adDataList,function(a,c){if(a&lt;=s.curAdIndex&amp;&amp;&quot;error&quot;===c.duration&amp;&amp;&quot;error&quot;===c.src&amp;&amp;!c.reportFlag){o.log(&quot;发送android空广告上报 cIndex:&quot;+a),s.mptIndex.push(a),i.trackempty(a);var d={ad_inc_num:c.counts,ad_pos:c.adPosition,ad_eff_pos:c.effAdPosition,ad_dur:c.duration,ad_vid:c.vid};s.sendInnerPingback(&quot;video_ad_play&quot;,d),c.reportFlag=!0}return b===c.src&amp;&amp;a&gt;s.oldAdIndex?(s.curAdIndex=a,!1):void 0})},u.getCurAdIndex=function(){var b=0,c=a.getSrc()||&quot;&quot;;return d.each(s.mediaAd.adDataList,function(a,d){return&quot;error&quot;!==d.src&amp;&amp;c.indexOf(d.src.split(&quot;?&quot;)[1])&gt;-1?(b=a,!1):void 0}),b},u.updateAdv=function(){r.reset(),s.reset(),r.player.adv.isMediaPlayed=!1,s.cache=d.extend(!0,{},r.player.cache),s.videoData=r.player.videoData,u.addAdvertise(r.addAdCallback)},u.eventInit=function(){var a=u.process,b=r.player;b.$midPlay.on(e.END_EVENT,function(){a.play(this)}),b.$main.on(e.END_EVENT,&quot;.ad_remove&quot;,function(){return a.adRemove(this),!1}),b.$main.on(e.END_EVENT,&quot;.&quot;+r.adDetailBtnClass,function(){a.adDetail()}),b._addEvent(&quot;timeupdate&quot;,a.timeupdate),b._addEvent(&quot;pause&quot;,a.pause),b.on(&quot;advended&quot;,function(){a.ended(&quot;force&quot;),e.IsAndroid&amp;&amp;e.IsBaiduBoxApp&amp;&amp;!b._sendRealVVFlag&amp;&amp;(o.log(&quot;统计: reallvv&quot;),p.realVV(b._startPlayTime),b._sendRealVVFlag=!0)}),r.isPauseAd&amp;&amp;b._addEvent(&quot;playing&quot;,a.playing)},u.process={},u.process.adRemove=function(a){k.pingback(d(a)),r.player.pause(),n.getChannelInfo(null,function(a){if(&quot;1&quot;===a.startapp){var b=m.parserAttributes();b.action=&quot;1.1&quot;,b.type=&quot;click&quot;,m.sendAction(b)}}),l.downloadPopTips({title:&quot;零广告看视频，请先安装搜狐视频APP&quot;})},u.process.adDetail=function(){if(s.mediaAd.adDataList){var a=s.curAdIndex,b=r.urls.advIframe+&quot;?url=&quot;+encodeURIComponent(s.mediaAd.adDataList[a].clickUrl);o.log(&quot;android click广告上报: clickIndex: &quot;+a),i.trackClick(a),k.pingback(null,&quot;ad_detail_click&quot;),r.player.pause(),setTimeout(function(){window.open(b)},50)}},u.process.timeupdate=function(){var a=r.player;if(!a.cache.isMediaAdContent)return void u.hideMediaView();if(r.debug&amp;&amp;r.debugCurUrl!==a.cache.curPlayUrl&amp;&amp;(o.log(&quot;当前播放视频地址:&quot;+JSON.stringify(a.cache.curPlayUrl)),r.debugCurUrl=a.cache.curPlayUrl),!a.adv.isMediaPlayed){var b=a.adv,c=a.videoTag.currentTime;if(0===c)return;var f=a.currentTime;if(f&gt;0&amp;&amp;Math.abs(f-a._lastCurTime)&gt;2&amp;&amp;(a._startPlayTime=d.now()),b.isMediaPlayed||e.IsBaiduBrowser||e.IsBaiduBoxApp)a._lastCurTime=f;else{if(f-a._lastCurTime&gt;5)return void a.seekTo(a._lastCurTime);a._lastCurTime=f}if(-1===s.curAdIndex&amp;&amp;(s.curAdIndex=u.getCurAdIndex()),a.hidePoster(),a.$mid.oriHide(),a._hideMainCtrl(),u.emptyAdCheckAndReport(a),s.oldAdIndex!==s.curAdIndex)return-1===d(s.mptIndex).indexOf(s.oldAdIndex)&amp;&amp;(o.log(&quot;android end广告上报: endIndex: &quot;+s.oldAdIndex),i.trackAdComplete(s.oldAdIndex)),void(s.oldAdIndex=s.curAdIndex);if(i.trackAd(c,s.curAdIndex),s.sendRepAdIndex!==s.curAdIndex){var g=s.mediaAd.adDataList[s.curAdIndex],h={ad_is_empty:1,ad_inc_num:g.counts,ad_pos:g.adPosition,ad_eff_pos:g.effAdPosition,ad_dur:g.duration,ad_vid:g.vid};s.sendInnerPingback(&quot;video_ad_play&quot;,h),s.sendRepAdIndex=s.curAdIndex}u.updateMediaTimer(a.cache.duration-parseInt(a.currentTime,10))}},u.process.ended=function(a){var b=r.player;if(&quot;undefined&quot;!=typeof a&amp;&amp;&quot;force&quot;===a||!d.isUndefined(b.adv)&amp;&amp;!b.adv.isMediaPlayed&amp;&amp;b.duration-b.currentTime&lt;1||&quot;0&quot;!==r.adClose){b.$video.attr(&quot;data-adover&quot;,&quot;true&quot;),&quot;0&quot;===r.adClose&amp;&amp;r.isGetFlag&amp;&amp;r.isValidFlag&amp;&amp;(o.log(&quot;android end广告上报: endIndex: &quot;+s.curAdIndex),s.curAdIndex=-1===s.curAdIndex?0:s.curAdIndex,i.trackAdComplete(s.curAdIndex)),b.$maskLayer.oriHide(),u.hideMediaView(),b.cache=s.cache,b.setSrc(b.cache.curPlayUrl),b.adv.isMediaPlayed=!0,b.cache.isMediaAdContent=!1,b.currentTime=0,console.log(&quot;设置为0&quot;);var c=b.adv.mediaAd.adDataList;try{if(s.curAdIndex&lt;c.length-1)for(var f=s.curAdIndex+1;f&lt;c.length;f++){var g=&quot;发送android&quot;+(&quot;0&quot;!==r.adClose?&quot;&quot;:&quot;空&quot;)+&quot;广告上报 cIndex:&quot;;o.log(g+f),i.trackempty(f);var h={ad_inc_num:c[f].counts,ad_pos:c[f].adPosition,ad_eff_pos:c[f].effAdPosition,ad_dur:c[f].duration,ad_vid:c[f].vid};s.sendInnerPingback(&quot;video_ad_play&quot;,h)}}catch(j){}e.IsIphone&amp;&amp;e.IsWeixinBrowser||b._showMainCtrl(),e.IsQQBrowser||e.IsBaiduBrowser?setTimeout(function(){b.play()},50):b.play(),d.isFunction(r.addAdCallback)&amp;&amp;r.addAdCallback()}},u.process.pause=function(){d.isUndefined(a.adv)||a.adv.isMediaPlayed||(a._showMidPlayBtn(),r.isPauseAd&amp;&amp;u.showParamAd())},u.process.play=function(a){a.adv&amp;&amp;!a.adv.isMediaPlayed&amp;&amp;(a.$mid.oriHide(),a.play())},u.process.playing=function(){u.hideParamAd()},u.init(a,b),this.isMediaPlayed=!1,this.addAdvertise=u.addAdvertise,this.updateAdv=u.updateAdv,this.gotoEnd=u.process.ended,this.hideMediaView=u.hideMediaView};c.exports=r}),svp.define(&quot;adv.ios&quot;,function(a,b,c){&quot;use strict&quot;;var d=svp.$,e=a(&quot;base.vars&quot;),f=a(&quot;base.url&quot;),g=a(&quot;base.cookie&quot;),h=a(&quot;base.console&quot;),i=function(a,b){var c={param:{player:null,adClose:&quot;0&quot;,debug:!1,debugCurUrl:&quot;&quot;,timeout:2e3,timeoutFlag:!1,getAdInfoFlag:!1,addAdCallback:null,dragCheckFlag:!0,urls:{iosMedia:&quot;http://m.aty.sohu.com/h&quot;,iosMediaDebug:&quot;http://60.28.168.195/h&quot;}},model:{cache:null,totDuration:0,appid:&quot;&quot;,curIndex:0,adDurList:[],mediaAd:{},videoData:null},view:{},ctrl:{}},i=c.param,j=c.model,k=(c.view,c.ctrl);i.init=function(a,b){return d.isUndefined(a)?!1:(i.player=a,i=d.merge(i,b),null!==f.getQueryString(&quot;adClose&quot;)&amp;&amp;(i.adClose=f.getQueryString(&quot;adClose&quot;)),&quot;0&quot;!==b.adClose&amp;&amp;(i.adClose=b.adClose),i.debug=e.ENABLE_DEBUG,!0)},i.reset=function(){i.timeoutFlag=!1,i.getAdInfoFlag=!1},j.init=function(a,b){j.cache=d.extend(!0,{},a.cache),j.videoData=a.videoData,j.appid=b.appid},j.reset=function(){j.cache=null,j.videoData=null,j.totDuration=0,j.curIndex=0,j.adDurList=[],j.mediaAd={}},j.getAdParam=function(a){var b={};return b.pt=&quot;oad&quot;,b.plat=j.getPlatId(),b.sysver=e.OsVersion,b.c=&quot;tv&quot;,b.cat=&quot;1&quot;,b.vc=j.getVc(a),b.pn=j.getPn(),b.al=a.plid||a.sid||a.aid||&quot;&quot;,b.ag=&quot;&quot;,b.st=&quot;&quot;,b.ar=a.areaId||a.area_id||6,b.vu=&quot;&quot;,b.tuv=g.get(&quot;MUV&quot;)||g.get(&quot;SUV&quot;)||&quot;&quot;,b.appid=j.appid,b.type=a.site&amp;&amp;2===a.site||a.cid&amp;&amp;&quot;9001&quot;===a.cid?&quot;my&quot;:&quot;vrs&quot;,&quot;0&quot;!==i.adClose&amp;&amp;(b.adClose=i.adClose),b.vid=a.vid||&quot;&quot;,b.tvid=a.tvid||a.tv_id||&quot;&quot;,b.pageUrl=window.location.href,b.du=a.totalDuration||a.duration||a.total_duration||0,b.partner=f.getQueryString(&quot;src&quot;)||f.getQueryString(&quot;SRC&quot;)||g.get(&quot;MTV_SRC&quot;)||&quot;-2&quot;,b},j.getPlatId=function(){return e.IsAndroidPad?&quot;h0&quot;:e.IsIphone?&quot;h3&quot;:e.IsIpad?&quot;h1&quot;:e.IsAndroid?&quot;h6&quot;:&quot;unknowm&quot;},j.getVc=function(a){var b=a.cateCode||a.cate_code||a.cid||&quot;&quot;;return b&amp;&amp;b.indexOf(&quot;;&quot;)&gt;-1&amp;&amp;(b=b.replace(/.*?;/,&quot;&quot;)),b},j.getPn=function(){var a=j.getPlatId();return&quot;h6&quot;===a?&quot;androidphone&quot;:&quot;h3&quot;===a?&quot;iphone&quot;:&quot;h16&quot;===a?&quot;androidpad&quot;:&quot;h1&quot;===a?&quot;ipad&quot;:&quot;unknowm&quot;},j.repOrAddParams=function(a){try{if(&quot;&quot;!==a&amp;&amp;a.indexOf(&quot;mmg.aty.sohu.com&quot;)&gt;=1){var b=a.match(/partner=([a-zA-Z0-9\-_\|]*)/i),c=f.getQueryString(&quot;src&quot;)||f.getQueryString(&quot;SRC&quot;)||g.get(&quot;MTV_SRC&quot;)||&quot;-2&quot;;(null===b||b.length&gt;=2&amp;&amp;&quot;&quot;===b[1])&amp;&amp;(a=a+&quot;&amp;partner=&quot;+c)}}catch(d){h.log(d)}var e=a.match(/urldomain=([a-zA-Z0-9\-_\|]*)/i);return(null===e||e.length&gt;=2&amp;&amp;&quot;&quot;===e[1])&amp;&amp;(a=a+&quot;&amp;urldomain=&quot;+window.location.host),a},j.sendPingback=function(a){if(&quot;&quot;!==a){var b=a.split(&quot;|&quot;);d.each(b,function(a,b){var c=document.createElement(&quot;script&quot;);b=j.repOrAddParams(b),h.log(&quot;上报统计URL&quot;,b),c.src=b,d(&quot;body&quot;).append(c)})}},j.toString=function(a){var b=[];for(var c in a)b.push(c+&quot;=&quot;+encodeURIComponent(a[c]));return b.join(&quot;&amp;&quot;)},j.getIosAdInfo=function(a,b){var c;i.debug?(c=i.urls.iosMediaDebug,h.log(&quot;ios广告请求:&quot;+c+&quot;?&quot;+j.toString(a))):c=i.urls.iosMedia,d.ajax({url:c,data:a,dataType:&quot;jsonp&quot;,success:b})},j.initAdDurList=function(a){var b=[];return d.each(a.adDataList,function(a,c){b.push(c.duration)}),b},j.isoAdInfoProcess=function(a){var b={adVidList:[],adDataList:[],totDuration:0,realTotalCounts:0,emptyCounts:0,effCounts:0};if(!d.isUndefined(a)&amp;&amp;1===a.status){var c=a.data.oad;if(c instanceof Array){var e=1,g=1;d.each(c,function(a,c){var h={};d.isUndefined(c.vid)||&quot;&quot;===c.vid?h.effAdPosition=-1:(b.adVidList.push(c.vid),h.effAdPosition=g,g++),&quot;number&quot;==typeof c.duration&amp;&amp;(b.totDuration+=c.duration),h.duration=c.duration||0,h.clickUrl=c.clickurl?c.clickurl:&quot;&quot;,h.pingback=c.pingback||&quot;&quot;,h.pingbacks=c.pingbacks||[],h.vid=c.vid||&quot;&quot;,h.finishPingback=c.finishedstatistics||&quot;&quot;;var i=h.pingback?f.getQueryData(h.pingback):&quot;&quot;,j=i.p?i.p.split(&quot;,&quot;):[];h.counts=j.length,0===h.duration&amp;&amp;(b.emptyCounts+=h.counts),b.realTotalCounts+=h.counts;for(var k=[],l=0;l&lt;h.counts;l++)k.push(e+l);e+=h.counts,h.adPosition=k.join(&quot;,&quot;),b.adDataList.push(h)}),b.effCounts=b.realTotalCounts-b.emptyCounts}}return b},j.sendInnerPingback=function(a,b){if(&quot;undefined&quot;!=typeof a){var c={video_catecode:j.videoData.cateCode&amp;&amp;j.videoData.cateCode.split(&quot;;&quot;)[0]||&quot;&quot;,video_plid:j.videoData.sid||j.videoData.plid||&quot;&quot;,video_dur:j.cache.totalDuration,partner:f.getQueryString(&quot;src&quot;)||f.getQueryString(&quot;SRC&quot;)||g.get(&quot;MTV_SRC&quot;)||&quot;-2&quot;};&quot;video_ad_response&quot;===a?(c.ad_status=1,c.ad_total_num=0,c.ad_empty_num=0,c.ad_eff_num=0,c.ad_total_dur=0):&quot;video_ad_play&quot;===a?(c.ad_is_empty=0,c.ad_total_num=j.mediaAd.realTotalCounts,c.ad_eff_num=j.mediaAd.effCounts):&quot;video_ad_close&quot;===a&amp;&amp;(c.ad_total_num=j.mediaAd.realTotalCounts,c.ad_eff_num=j.mediaAd.effCounts);for(var d in b)c[d]=b[d];h.log(&quot;发送内部行为统计数据 (&quot;+a+&quot;):&quot;,c)}},k.init=function(a,b){i.init(a,b)&amp;&amp;(j.init(a,b),k.eventInit())},k.addAdvertise=function(b){this.isMediaPlayed=!1,i.addAdCallback=b;var c=i.player.cache;setTimeout(function(){i.getAdInfoFlag||(i.timeoutFlag=!0,h.log(&quot;ios广告请求超时，直接播放视频&quot;),j.sendInnerPingback(&quot;video_ad_response&quot;),c.curPlayUrl=c.srcList[c.modeType][0].url,a.initVideoTag(),a.adv.isMediaPlayed=!0,d.isFunction(b)&amp;&amp;b())},i.timeout),j.sendInnerPingback(&quot;video_ad_request&quot;),svp.debug.playerLoadAdDataStartTime=Date.now(),k.getIosAdInfo(function(e){if(h.log(&quot;获取ios广告完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadAdDataStartTime)/1e3),!i.timeoutFlag){j.mediaAd=e;var f={ad_status:0,ad_total_num:e.realTotalCounts,ad_empty_num:e.emptyCounts,ad_eff_num:e.effCounts,ad_total_dur:e.totDuration};j.sendInnerPingback(&quot;video_ad_response&quot;,f),j.totDuration=e.totDuration;var g=i.player.adv;if(g.mediaAd=e,j.adDurList=j.initAdDurList(g.mediaAd),&quot;0&quot;===i.adClose){h.log(&quot;ios广告获取成功&quot;,e);for(var k in c.srcList)d.each(c.srcList[k],function(a,b){e.adVidList.length&gt;0&amp;&amp;(b.url+=(b.url.indexOf(&quot;?&quot;)&gt;-1?&quot;&amp;&quot;:&quot;?&quot;)+&quot;ads=&quot;+e.adVidList.join(&quot;,&quot;))})}else a.adv.isMediaPlayed=!0,h.log(&quot;ios广告已经获取成功，但是广告被屏蔽&quot;,e),j.sendInnerPingback(&quot;video_ad_close&quot;),g=i.player.adv,d.each(g.mediaAd.adDataList,function(a,b){j.sendPingback(b.pingback);var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};if(0!==b.duration?(h.log(&quot;ios广告上报 start:&quot;+b.pingback),c.ad_is_empty=1):h.log(&quot;ios空广告上报 start:&quot;+b.pingback),j.sendInnerPingback(&quot;video_ad_play&quot;,c),b.pingback=&quot;&quot;,0!==b.pingbacks.length){var d=b.pingbacks[0];0===d.v&amp;&amp;(j.sendPingback(d.v),h.log(0!==b.duration?&quot;ios广告上报 v:&quot;+d.v+&quot;, curIndex: 0&quot;:&quot;ios空广告上报 v: &quot;+d.v+&quot;, curIndex: 0&quot;))}});c.curPlayUrl=c.srcList[c.modeType][0].url,a.setSrc(c.curPlayUrl),a._play(),d.isFunction(b)&amp;&amp;b()}})},k.updateAdv=function(){i.reset(),j.reset(),i.player.adv.mediaAd=null,i.player.adv.isMediaPlayed=!1,j.cache=d.extend(!0,{},i.player.cache),j.videoData=i.player.videoData,k.addAdvertise(i.addAdCallback)},k.getIosAdInfo=function(a){if(e.IsIphone||e.IsIpad){var b=j.getAdParam(j.videoData);j.getIosAdInfo(b,function(b){i.getAdInfoFlag=!0;var c=j.isoAdInfoProcess(b);a(c)})}else{var c=j.isoAdInfoProcess();a(c)}},k.eventInit=function(){var a=k.process;i.player._addEvent(&quot;timeupdate&quot;,a.timeupdate)},k.process={},k.process.timeupdate=function(){var a=this,b=a.currentTime;if(i.debug&amp;&amp;i.debugCurUrl!==a.cache.curPlayUrl&amp;&amp;(h.log(&quot;当前播放视频地址:&quot;+JSON.stringify(a.cache.curPlayUrl)),i.debugCurUrl=a.cache.curPlayUrl),0!==b&amp;&amp;i.dragCheckFlag){var c=a.adv,e=c.mediaAd.adDataList,f=c.mediaAd.adVidList;if(!a.adv.isMediaPlayed&amp;&amp;null!==i.player.adv.mediaAd)if(a._showPlayBtn(),&quot;0&quot;!==i.adClose)a.adv.isMediaPlayed=!0,d.each(e,function(a,b){b.pingback+=b.pingback.indexOf(&quot;?&quot;)&gt;-1?&quot;&amp;&quot;:&quot;?&quot;,b.pingback+=&quot;adClose=&quot;+i.adClose,j.sendPingback(b.pingback),h.log(&quot;ios广告上报 start:&quot;+b.pingback);var c={ad_is_empty:1,ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};j.sendInnerPingback(&quot;video_ad_play&quot;,c),b.pingback=&quot;&quot;});else{if(b&gt;0&amp;&amp;Math.abs(b-this._lastCurTime)&gt;2&amp;&amp;(this._startPlayTime=d.now()),i.dragCheckFlag&amp;&amp;b-a._lastCurTime&gt;2)return i.dragCheckFlag=!1,a.seekTo(a._lastCurTime),void setTimeout(function(){i.dragCheckFlag=!0},1e3);var g=0,k=0;d.each(j.adDurList,function(c,d){return 0===g&amp;&amp;0===c&amp;&amp;(g=d,k=d),b=parseInt(b,10),b&gt;=g&amp;&amp;0!==c&amp;&amp;(g+=d,k=d,g&gt;=b&amp;&amp;(j.curIndex=c),c===j.adDurList.length-1&amp;&amp;b&gt;=g)?(j.curIndex=c,a.$video.attr(&quot;data-adover&quot;,&quot;true&quot;),!1):void 0}),f.length!==e.length&amp;&amp;d.each(e,function(a,b){if(!(a&lt;=j.curIndex))return!1;if(0===b.duration&amp;&amp;&quot;&quot;!==b.pingback){if(j.sendPingback(b.pingback),h.log(&quot;ios空广告上报 start:&quot;+b.pingback),&quot;&quot;!==b.pingback){var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};j.sendInnerPingback(&quot;video_ad_play&quot;,c)}b.pingback=&quot;&quot;,d.each(b.pingbacks,function(a,c){0===c.t&amp;&amp;(j.sendPingback(c.v),l.pingbacks.length=0,h.log(&quot;ios空广告上报 v: &quot;+b.v+&quot;, curIndex: &quot;+a))})}}),b&gt;j.totDuration&amp;&amp;j.curIndex===e.length-1&amp;&amp;(a.adv.isMediaPlayed=!0,a.trigger(&quot;advended&quot;)),a._lastCurTime=b;var l=c.mediaAd.adDataList[j.curIndex],m=parseInt(b,10);if(m-=g-k,0===m&amp;&amp;&quot;&quot;!==l.pingback){if(j.sendPingback(l.pingback),h.log(&quot;ios广告上报 start:&quot;+l.pingback),&quot;&quot;!==l.pingback){h.log(&quot;发送内部行为统计数据: video_ad_play&quot;);var n={ad_is_empty:1,ad_inc_num:l.counts,ad_pos:l.adPosition,ad_eff_pos:l.effAdPosition,ad_dur:l.duration,ad_vid:l.vid};j.sendInnerPingback(&quot;video_ad_play&quot;,n)}l.pingback=&quot;&quot;}d.each(l.pingbacks,function(a,b){m===b.t&amp;&amp;(j.sendPingback(b.v),l.pingbacks.splice(a,1),h.log(&quot;ios广告上报 v: &quot;+b.v+&quot;, curIndex: &quot;+a))}),m&gt;=l.duration-1&amp;&amp;&quot;&quot;!==l.finishPingback&amp;&amp;(j.sendPingback(l.finishPingback),l.finishPingback=&quot;&quot;,h.log(&quot;ios end广告上报: endIndex: &quot;+j.curIndex))}}},k.init(a,b),this.isMediaPlayed=!1,this.addAdvertise=k.addAdvertise,this.updateAdv=k.updateAdv,this.gotoEnd=function(){i.player.seekTo(i.player.cache.duration)}};c.exports=i}),svp.define(&quot;adv.andorid.parseData&quot;,function(a,b,c){var d=a(&quot;base.url&quot;),e=a(&quot;base.vars&quot;),f=a(&quot;base.console&quot;);window.getAdsCallback=function(a){function b(a){var b,c,e,f,g,h,i;for(h=a.length,g=0,i=&quot;&quot;;h&gt;g;){do b=d[255&amp;a.charCodeAt(g++)];while(h&gt;g&amp;&amp;-1==b);if(-1==b)break;do c=d[255&amp;a.charCodeAt(g++)];while(h&gt;g&amp;&amp;-1==c);if(-1==c)break;i+=String.fromCharCode(b&lt;&lt;2|(48&amp;c)&gt;&gt;4);do{if(e=255&amp;a.charCodeAt(g++),61==e)return i;e=d[e]}while(h&gt;g&amp;&amp;-1==e);if(-1==e)break;i+=String.fromCharCode((15&amp;c)&lt;&lt;4|(60&amp;e)&gt;&gt;2);do{if(f=255&amp;a.charCodeAt(g++),61==f)return i;f=d[f]}while(h&gt;g&amp;&amp;-1==f);if(-1==f)break;i+=String.fromCharCode((3&amp;e)&lt;&lt;6|f)}return i}function c(a){var b,c,d,e,f,g;for(b=&quot;&quot;,d=a.length,c=0;d&gt;c;)switch(e=a.charCodeAt(c++),e&gt;&gt;4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&amp;e)&lt;&lt;6|63&amp;f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&amp;e)&lt;&lt;12|(63&amp;f)&lt;&lt;6|(63&amp;g)&lt;&lt;0)}return b}f.log(&quot;获取Android广告完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadAdDataStartTime)/1e3);var d=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);xmlData=c(b(a)),vast.parseData(xmlData),f.log(&quot;Android广告模块解析完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadAdDataStartTime)/1e3)},function(){function a(a){a&amp;&amp;a.indexOf(&quot;mmg.aty.sohu.com&quot;)&gt;-1&amp;&amp;(a=c.repOrAddParams(a)),f.log(&quot;adEngine trackImg URL&quot;,a);var b=new Image;b.src=a,h.push(b)}var b,c=window.vast={},g=new Array,h=[];c.parseData=function(a){function d(a){var b=a.split(&quot;:&quot;),c=parseInt(b[0]),d=parseInt(b[1]),e=parseInt(b[2]),f=3600*c+60*d+e;return f}window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(a,&quot;text/xml&quot;)):(xmlDoc=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),xmlDoc.async=&quot;true&quot;,xmlDoc.loadXML(a)),f.log(a);for(var h=xmlDoc.getElementsByTagName(&quot;Ad&quot;),i=0;i&lt;h.length;i++){for(var j={},k={},l=h[i].getElementsByTagName(&quot;InLine&quot;),m=0;m&lt;l.length;m++){var n=l[m].tagName,o=l[m].getElementsByTagName(&quot;AdSystem&quot;)[0].tagName,p=l[m].getElementsByTagName(&quot;AdSystem&quot;)[0].childNodes[0].nodeValue;k[o]=p;var q=l[m].getElementsByTagName(&quot;AdTitle&quot;)[0].tagName,r=l[m].getElementsByTagName(&quot;AdTitle&quot;)[0].childNodes[0].nodeValue;k[q]=r;var s=l[m].getElementsByTagName(&quot;Description&quot;)[0].tagName,t=l[m].getElementsByTagName(&quot;Description&quot;)[0].childNodes[0].nodeValue;k[s]=t;for(var u=l[m].getElementsByTagName(&quot;Impression&quot;),v=new Array,w=0;w&lt;u.length;w++){var x={},y={},z=l[m].getElementsByTagName(&quot;Impression&quot;)[w].tagName,A=l[m].getElementsByTagName(&quot;Impression&quot;)[w].childNodes[0].nodeValue,A=A.replace(/\s/g,&quot;&quot;);x[z]=A;var B=l[m].getElementsByTagName(&quot;Impression&quot;)[w].getAttribute(&quot;id&quot;);y[B]=x,v.push(y)}k.Imp=v,k.isImp=!1;for(var C=l[m].getElementsByTagName(&quot;Creatives&quot;)[0],D=C.getElementsByTagName(&quot;Creative&quot;),E=0;E&lt;D.length;E++){var F=D[E].getElementsByTagName(&quot;Linear&quot;)[0],G=F.getElementsByTagName(&quot;Duration&quot;)[0].tagName,H=F.getElementsByTagName(&quot;Duration&quot;)[0].childNodes[0].nodeValue;k[G]=d(H);for(var I=F.getElementsByTagName(&quot;MediaFiles&quot;)[0],J=I.getElementsByTagName(&quot;MediaFile&quot;),K=new Array,L=0;L&lt;J.length;L++){var M={};if(J[L].hasChildNodes())var N=J[L].tagName,O=J[L].childNodes[0].nodeValue,O=O.replace(/\s/g,&quot;&quot;);else var O=null;M[N]=O;var P=J[L].getAttribute(&quot;width&quot;);M.width=P;var Q=J[L].getAttribute(&quot;height&quot;);M.height=Q;var R=J[L].getAttribute(&quot;type&quot;);M.type=R;var S=J[L].getAttribute(&quot;vid&quot;);M.vid=S,K.push(M)}k.MediaFile=K;for(var T=F.getElementsByTagName(&quot;VideoClicks&quot;)[0],U=T.getElementsByTagName(&quot;ClickThrough&quot;),V=0;V&lt;U.length;V++){var W=U[V].tagName,X=U[V].childNodes[0].nodeValue,X=X.replace(/\s/g,&quot;&quot;);k[W]=X}var Y=T.getElementsByTagName(&quot;ClickTracking&quot;),Z=new Array;if(T.hasChildNodes()){for(var $=0;$&lt;Y.length;$++){var _={},aa=Y[$].tagName,ba=Y[$].childNodes[0].nodeValue,ba=ba.replace(/\s/g,&quot;&quot;);_[aa]=ba;var ca=Y[$].getAttribute(&quot;id&quot;);_.id=ca,Z.push(_)}k.ClickTracking=Z}var da=F.getElementsByTagName(&quot;TrackingEvents&quot;)[0];if(void 0!=da){for(var ea=da.getElementsByTagName(&quot;Tracking&quot;),fa=new Array,ga=0;ga&lt;ea.length;ga++){var ha={},ia=ea[ga].tagName,ja=ea[ga].childNodes[0].nodeValue,ja=ja.replace(/\s/g,&quot;&quot;);ha[ia]=ja,adProTrkEvent=ea[ga].getAttribute(&quot;event&quot;),adProTrkId=ea[ga].getAttribute(&quot;id&quot;),adProTrkOffset=ea[ga].getAttribute(&quot;offset&quot;),ha.event=adProTrkEvent,ha.id=adProTrkId,ha.isTrack=!1,ha.offset=null!=adProTrkOffset?d(adProTrkOffset):adProTrkOffset,fa.push(ha)}k.Tracking=fa}}for(var ka=l[m].getElementsByTagName(&quot;Extensions&quot;)[0],la=ka.getElementsByTagName(&quot;Extension&quot;),ma=0;ma&lt;la.length;ma++)for(var na=la[ma].getElementsByTagName(&quot;AdParams&quot;)[0],oa=(na.getAttribute(&quot;adStyle&quot;),na.getAttribute(&quot;sequence&quot;),na.getElementsByTagName(&quot;CallbackFun&quot;)),pa=0;pa&lt;oa.length;pa++);j[n]=k}g.push(j)}for(var qa=[],ra={},i=0;i&lt;g.length;i++){var sa=g[i].InLine.MediaFile[0].MediaFile,ta=g[i].InLine.ClickThrough,ua=g[i].InLine.Duration,S=g[i].InLine.MediaFile[0].vid;null!=sa?(ra.videoUrl=sa,ra.clickUrl=ta,ra.duration=ua,ra.vid=S,ra=c.cbDataProcess(ra,g[i].InLine),qa.push(ra),ra={}):(ra.videoUrl=&quot;error&quot;,ra.clickUrl=&quot;error&quot;,ra.duration=&quot;error&quot;,ra.vid=&quot;error&quot;,ra=c.cbDataProcess(ra,g[i].InLine),qa.push(ra),ra={})}e.ENABLE_DEBUG&amp;&amp;f.log(&quot;android 广告数据:&quot;+JSON.stringify(g)),b(qa)},c.getData=function(a,c){&quot;undefined&quot;!=typeof g&amp;&amp;g instanceof Array&amp;&amp;(g=[]),b=c;var d=document.createElement(&quot;script&quot;);d.setAttribute(&quot;type&quot;,&quot;text/javascript&quot;),d.src=a,document.body.appendChild(d)},c.trackAd=function(b,d){var e=g[d],f=Math.floor(b);if(c.trackempty(d),void 0!=e.InLine.Tracking)for(var h=e.InLine.Tracking.length,i=0;h&gt;i;i++){var j=e.InLine.Tracking[i];j.isTrack||f!=j.offset||(a(j.Tracking),j.isTrack=!0)}},c.trackImp=function(){var b=g.length,c=0;for(c=0;b&gt;c;c++){var d=g[c];d.InLine.isImp=!0;for(var e=d.InLine.Imp.length,f=0;e&gt;f;f++){var h,i=d.InLine.Imp[f];for(var j in i)h=i[j].Impression;a(h)}}},c.trackempty=function(b){var c=g[b];if(!c.InLine.isImp){f.log(&quot;fff:&quot;+b);for(var d=c.InLine.Imp.length,e=0;d&gt;e;e++){var h,i=c.InLine.Imp[e];for(var j in i)h=i[j].Impression;c.InLine.isImp=!0,a(h)}}},c.trackAdComplete=function(b){var c=g[b];if(void 0!=c.InLine.Tracking)for(var d=0;d&lt;c.InLine.Tracking.length;d++)&quot;complete&quot;==c.InLine.Tracking[d].event&amp;&amp;a(c.InLine.Tracking[d].Tracking)},c.trackClick=function(b){var c=g[b];if(void 0!=c.InLine.ClickTracking)for(var d=c.InLine.ClickTracking.length,e=0;d&gt;e;e++){var f=c.InLine.ClickTracking[e],h=f.ClickTracking;a(h)}},c.getQueryString=function(a){var b=new RegExp(&quot;(^|&amp;?)&quot;+a+&quot;=([^&amp;]*)(&amp;|$)&quot;,&quot;i&quot;),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},c.getCookie=function(a){for(var b,c=document.cookie.split(&quot;;&quot;),d=0;d&lt;c.length;d++)if(b=c[d].split(&quot;=&quot;),b[0].trim()==a)return unescape(b[1]);return&quot;&quot;},c.repOrAddParams=function(a){try{if(&quot;&quot;!==a&amp;&amp;a.indexOf(&quot;mmg.aty.sohu.com&quot;)&gt;-1){var b=a.match(/partner=([a-zA-Z0-9\-_\|]*)/i),d=c.getQueryString(&quot;src&quot;)||c.getQueryString(&quot;SRC&quot;)||c.getCookie(&quot;MTV_SRC&quot;)||&quot;-2&quot;;(null===b||b.length&gt;=2&amp;&amp;&quot;&quot;===b[1])&amp;&amp;(a=a+&quot;&amp;partner=&quot;+d)}}catch(e){f.log(e)}var g=a.match(/urldomain=([a-zA-Z0-9\-_\|]*)/i);return(null===g||g.length&gt;=2&amp;&amp;&quot;&quot;===g[1])&amp;&amp;(a=a+&quot;&amp;urldomain=&quot;+window.location.host),a},c.cbDataProcess=function(a,b){var c=b.Imp[0].monitorServer.Impression,e=d.getQueryData(c),f=e.p?e.p.split(&quot;,&quot;):[];return a.cnt=f.length,a}}(),c.exports=vast}),svp.define(&quot;player.controls&quot;,function(a){&quot;use strict&quot;;a(&quot;player.ctrlProgress&quot;),a(&quot;player.ctrlButton&quot;),a(&quot;player.ctrlHd&quot;),a(&quot;player.ctrlFullscreen&quot;);var b=a(&quot;base.vars&quot;),c=a(&quot;player.mediaPlayer&quot;);c.prototype._hideMainCtrl=function(){var a=this;clearInterval(this._mainCtrlInterval),b.IsIphone||(this._mainCtrlInterval=setTimeout(function(){a.$title.oriHide(),a.$ctrlBar.oriHide(),a.$midModeListCon.oriHide()},200))},c.prototype._showMainCtrl=function(){var a=this;clearInterval(this._mainCtrlInterval),this._mainCtrlInterval=setTimeout(function(){a.$title.oriShow(),a.$ctrlBar.oriShow(),a.$midModeListCon.oriShow()},200)},c.prototype._initMainClick=function(){var a=this;this._mainCtrlInterval=null,this.$ctrlCon.on(b.END_EVENT,function(){($.isUndefined(a.adv)||a.adv.isMediaPlayed)&amp;&amp;(&quot;block&quot;===a.$midPlay.css(&quot;display&quot;)&amp;&amp;a._playOrPause(&quot;play&quot;),&quot;none&quot;===a.$ctrlBar.css(&quot;display&quot;)?(a._showMainCtrl(),clearTimeout(a._hideMainCtrlTime),a._hideMainCtrlTime=setTimeout(function(){
a._hideMainCtrl()},3e3)):a._hideMainCtrl())})},c.prototype._initControls=function(){this._initCtrlProgress(),this._initCtrlButton(),this._initModeSelect(),this._initMainClick(),this._initCtrlFullscreen()}}),svp.define(&quot;player.cooperation&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.special&quot;);c.prototype._cooperatorVideoAttr=function(a){var c=this,e=function(){var a=c.cache.oriUrls.m3u8,d=&quot;&quot;;if(0===a[c.cache.modeType].length){var e=[&quot;nor&quot;,&quot;hig&quot;,&quot;sup&quot;];b.each(e,function(b,c){return 0!==a[c].length?(d=a[c][0],!1):void 0})}else d=a[c.cache.modeType][0];if(&quot;&quot;!==d&amp;&amp;c.$video.attr(&quot;data-playUrl&quot;,d),!b.isUndefined(c.videoData.urls.downloadUrl)&amp;&amp;!b.isUndefined(c.videoData.urls.downloadUrl[0])){var f=c.videoData.urls.downloadUrl[0];c.$video.attr(&quot;data-downloadUrl&quot;,f)}};d.isCooperator()&amp;&amp;(b.isNumber(a)&amp;&amp;a&gt;0?setTimeout(function(){e()},3e3):e())}}),svp.define(&quot;player.ctrlButton&quot;,function(a){&quot;use strict&quot;;var b=a(&quot;base.vars&quot;),c=a(&quot;player.mediaPlayer&quot;);c.prototype._showPlayBtn=function(){this.$ctrlPlay.oriShow(),this.$ctrlPause.oriHide()},c.prototype._showMidPlayBtn=function(){this._hideLoading(),this._hideMainCtrl(),this.$ctrlBar.oriHide(),this.$midModeListCon.oriHide(),this.$mid.oriShow(),this.$midPlay.oriShow(),this.$title.oriHide()},c.prototype._showPauseBtn=function(){this.$ctrlPlay.oriHide(),this.$ctrlPause.oriShow()},c.prototype._showLoading=function(){b.IsIOS&amp;&amp;(b.IsQQBrowser||b.IsUCBrowser)||(b.IsBaiduBrowser||this.$midPlay.oriHide(),this.$loading.oriShow(),this.$mid.oriHide())},c.prototype._hideLoading=function(){b.IsBaiduBrowser||this.$midPlay.oriHide(),this.$loading.oriHide()};var d=function(a){a.$midPlay.on(b.END_EVENT,function(){return $(this).oriHide(),a._playOrPause(&quot;play&quot;),!1})},e=function(a){a.$ctrlPlay.on(b.END_EVENT,function(){return a._playOrPause(&quot;play&quot;),!1}),a.$ctrlPause.on(b.END_EVENT,function(){return a._playOrPause(&quot;pause&quot;),!1}),a._addEvent(&quot;pause&quot;,function(){(!b.IsAndroid||$.isUndefined(a.adv)||a.adv.isMediaPlayed)&amp;&amp;(a._hideLoading(),a._showPlayBtn(),a._showMainCtrl())}),b.IsIphone||(a._addEvent(&quot;play&quot;,a._showPauseBtn),a._addEvent(&quot;playing&quot;,a._showPauseBtn))};c.prototype._initCtrlButton=function(){d(this),e(this)}}),svp.define(&quot;player.ctrlFullscreen&quot;,function(a){&quot;use strict&quot;;var b=a(&quot;base.vars&quot;),c=a(&quot;player.mediaPlayer&quot;);c.prototype._isSupportSysFullScreen=function(){var a=!1,b=this.videoTag;return b.requestFullscreen?a=!0:b.mozRequestFullScreen?a=!0:b.webkitRequestFullscreen?a=!0:b.webkitEnterFullscreen?a=!0:b.msRequestFullscreen&amp;&amp;(a=!0),$(this.videoTag).hasClass(&quot;inline_player&quot;)&amp;&amp;!$.isEmpty(this.cache.fullscreenType)&amp;&amp;&quot;1&quot;!==this.cache.fullscreenType&amp;&amp;(a=!1),a},c.prototype._apiEnterFullScreen=function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.msRequestFullscreen&amp;&amp;a.msRequestFullscreen()},c.prototype._apiExitFullScreen=function(a){a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.msExitFullscreen&amp;&amp;a.msExitFullscreen()},c.prototype._enterSysFullScreen=function(){var a=this;!b.UA.match(/HS\-U950|HUAWEI_C8812|vivo/i)||b.IsUCBrowser||b.IsQQBrowser||a.videoTag.play();var c=function(){a.videoTag.paused&amp;&amp;!b.IsIOS&amp;&amp;setTimeout(function(){a.videoTag.play()},0)};if(this._isSupportSysFullScreen()){var d=a.videoTag;document.addEventListener(&quot;fullscreenchange&quot;,c,!1),document.addEventListener(&quot;mozfullscreenchange&quot;,c,!1),document.addEventListener(&quot;webkitfullscreenchange&quot;,c,!1),document.addEventListener(&quot;MSFullscreenChange&quot;,c,!1),a._apiEnterFullScreen(d)}setTimeout(function(){a.videoTag.play()},0)},c.prototype._exitSysFullScreen=function(){var a=this,b=a.videoTag;a._apiExitFullScreen(b)},c.prototype._fullOrShrink=function(a){var c=this;clearTimeout(this._hideMainCtrlTime),&quot;fullScreen&quot;===a?&quot;1&quot;===this.cache.fullscreenType?this._enterSysFullScreen():(b.IsIphone||b.IsOldWindowsPhone||b.IsAndroid&amp;&amp;b.IsQQBrowser||b.IsBaiduBrowser?this._playOrPause(&quot;play&quot;):($(&quot;html&quot;).addClass(&quot;position_fullscreen&quot;),this._scrollTop=$(window).scrollTop(),this.$ctrlFullScreen.oriHide(),this.$ctrlShrinkScreen.oriShow()),$(&quot;.finPic&quot;).oriHide()):($(&quot;html&quot;).removeClass(&quot;position_fullscreen&quot;),this.$ctrlFullScreen.oriShow(),this.$ctrlShrinkScreen.oriHide(),$(window).scrollTop(this._scrollTop),setTimeout(function(){$(&quot;.finPic&quot;).oriShow()},500)),this._hideMainCtrlTime=setTimeout(function(){c._hideMainCtrl()},3e3)};var d=function(a){a.$ctrlFullScreen.on(b.END_EVENT,function(){return a._fullOrShrink(&quot;fullScreen&quot;),!1}),a.$ctrlShrinkScreen.on(b.END_EVENT,function(){return a._fullOrShrink(&quot;shrinkScreen&quot;),!1})};c.prototype._initCtrlFullscreen=function(){d(this)}}),svp.define(&quot;player.ctrlHd&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;base.vars&quot;),d=a(&quot;player.mediaPlayer&quot;),e=window.ClickTrace=a(&quot;trace.click&quot;),f=a(&quot;data.appDownload&quot;),g=a(&quot;base.action&quot;),h=function(a){a.$midModeListCon.on(c.END_EVENT,function(){var c=b(this);return c.hasClass(&quot;show_list&quot;)?c.removeClass(&quot;show_list&quot;):c.addClass(&quot;show_list&quot;),clearTimeout(a._hideMainCtrlTime),!1})},i=function(a){a.$midModeLi.on(c.END_EVENT,function(){var c=b(this);a._changeModeFlag=!0;var d=c.attr(&quot;data-mode&quot;),f=c.html();if(&quot;app&quot;!==d){var g=a.$midCurMode.attr(&quot;data-mode&quot;),h=a.$midCurMode.html();a.$midCurMode.attr(&quot;data-mode&quot;,d).html(f),c.attr(&quot;data-mode&quot;,g).html(h)}return a.$midModeListCon.removeClass(&quot;show_list&quot;),e.pingback(null,&quot;video_play_code&quot;),a.playByMode(d),a._hideMainCtrlTime=setTimeout(function(){a._hideMainCtrl()},3e3),!1})};d.prototype.playByMode=function(a){var d=this,e=this.cache;if(!b.isUndefined(a)&amp;&amp;e.modeType!==a||c.IsWeixinBrowser)if(&quot;app&quot;===a){var h=g.parserAttributes();h.action=&quot;1.1&quot;,h.type=&quot;click&quot;,g.sendAction(h),f.gotoDownload()}else b.each(e.modeTypeList,function(b,f){if(f===a){d._pause();var g=d.currentTime,h=e.srcList[a][0].url;return e.curPlayUrl=h,e.curIndex=0,e.modeType=a,d.setSrc(h),c.IsIphone&amp;&amp;c.IsUCBrowser?d.play():setTimeout(function(){d.seekTo(g),d.play(),(c.IsUCBrowser||c.IsQQBrowser)&amp;&amp;d.$video.oriShow()},100),!1}})},d.prototype._initModeSelect=function(){this._changeModeFlag=!1,h(this),i(this)}}),svp.define(&quot;player.ctrlProgress&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.vars&quot;),e=a(&quot;player.playHistory&quot;),f=a(&quot;trace.video&quot;),g=a(&quot;base.console&quot;),h=a(&quot;player.errorTypes&quot;),i=(a(&quot;trace.click&quot;),a(&quot;data.appDownload&quot;)),j=function(a){var c=a.cache,e=c.srcList[c.modeType]||[],f=a.androidAdv;if(!b.isUndefined(f)&amp;&amp;!f.isMediaPlayed&amp;&amp;d.IsUCBrowser&amp;&amp;d.IsVivoPhone)return a.videoTag.currentTime;if(e.length&gt;1){var g=a.videoTag.currentTime,h=c.curIndex;return b.each(e,function(a,b){return h&gt;a?void(g+=b.duration||0):!1}),g}return a.videoTag.currentTime},k=function(a){var b=a.videoData,c=a.cache;if(0!==a.currentTime&amp;&amp;!c.isMediaAdContent&amp;&amp;!a._makeHistoryFlag){var d={sid:b.sid,vid:b.vid,site:b.site,cid:b.cid,playTime:a.currentTime,duration:b.totalDuration,title:b.tvname||&quot;&quot;};if(c.isMediaAdContent){if(null!==history&amp;&amp;0!==history.flag)return;d.flag=&quot;0&quot;,d.playTime=1}e.setHistory(d),a._makeHistoryFlag=!0,setTimeout(function(){a._makeHistoryFlag=!1},1e3)}},l=function(a){var b=a.videoData;if(a.cache.isRemHistory){var c={vid:b.vid,site:b.site},d=e.getHistory(c),f=null;d.length&gt;0&amp;&amp;(f=d[0],g.log(&quot;prgress:&quot;,f.playTime),a.seekTo(f.playTime)),a._playByHistoryFlag=!0}},m=function(a){a._addEvent(&quot;timeupdate&quot;,function(){a._sendVVFlag||(g.log(&quot;统计: vv&quot;),f.vv(),a._sendVVFlag=!0),!svp.debug.isShowPlayerPlayStartTime&amp;&amp;a.currentTime&gt;0&amp;&amp;(g.log(&quot;视频加载时间:&quot;+(Date.now()-svp.debug.playerPlayStartTime)/1e3+&quot;秒&quot;),svp.debug.isShowPlayerPlayStartTime=!0);var c=a.cache;&quot;&quot;===a.videoData.totalDuration&amp;&amp;a.videoTag.duration&amp;&amp;(c.duration=a.videoData.duration=a.videoData.totalDuration=a.videoTag.duration);var e=a.duration=c.duration,m=a.currentTime=j(a);if(c.timeLimit&gt;0&amp;&amp;m&gt;=c.timeLimit&amp;&amp;(b.isUndefined(a.adv)||!b.isUndefined(a.adv)&amp;&amp;a.adv.isMediaPlayed))return a.$video.remove(),void a._showMsg({text:h.SUPPORT[304],btns:{btnA:{text:&quot;立即下载&quot;,callback:function(){i.gotoDownload()}}}});if(m&gt;0){if(d.IsIphone||a.hidePoster(),a._hideLoading(),!b.isUndefined(a.adv)&amp;&amp;!a.adv.isMediaPlayed)return;if(m&gt;1){a._sendRealVVFlag||(g.log(&quot;统计: reallvv&quot;),f.realVV(a._startPlayTime),a._sendRealVVFlag=!0,a.$video.attr(&quot;data-adover&quot;,&quot;true&quot;),a._cooperatorVideoAttr()),c.isRemHistory&amp;&amp;(a._playByHistoryFlag||l(a),k(a)),m&gt;0&amp;&amp;Math.abs(m-a._lastCurTime)&gt;2&amp;&amp;(a._startPlayTime=b.now()),(d.IsIphone||d.IsOldWindowsPhone)&amp;&amp;a.$midModeList.oriHide(),a._lastCurTime=m,!a._sendEndFlag&amp;&amp;m&gt;e-15&amp;&amp;(g.log(&quot;统计: ended&quot;),f.ended(m,this._bufferCount),a._sendEndFlag=!0),null===a._traceHeartInterval&amp;&amp;(a._traceHeartInterval=setInterval(function(){g.log(&quot;统计: heart&quot;),f.heart(a.currentTime)},12e4)),a._changeModeFlag=!1,a._dragRangeFlag=!1,a._firstWaitingFlag=!1,a._mediaAdOverFlag=!0,d.IsIphone||d.IsOldWindowsPhone||/Android\/?\s?2\../i.test(d.UA)||d.IsQQBrowser||d.IsUCBrowser?a._showPlayBtn():d.IsIphone||d.IsIpad||a._showPauseBtn();var n=m/e*100+&quot;%&quot;;if(m&gt;=e&amp;&amp;c.timeLimit===e){m=e,n=&quot;100%&quot;;var o=c.timeLimit,p=(o-o%60)/60;p=o%60===0?p:p+1}m&gt;e&amp;&amp;(m=e),a.$ctrlCurTime.html(b.formatSeconds(m)),a.$ctrlDuration.html(b.formatSeconds(e)),a._dragFlag||a.$ctrlCurPlayedBar.css({width:n}),d.IsUCBrowser&amp;&amp;d.IsIphone&amp;&amp;parseInt(m,10)===parseInt(e,10)&amp;&amp;a._fireEvent(&quot;ended&quot;)}}})},n=function(a){a.$ctrlDragAnchor.on(d.START_EVENT,function(b){return clearTimeout(a._hideMainCtrlTime),clearTimeout(a._rewindForwardInterval),a.$midRewindForwardCon.oriShow(),a._dragFlag=!0,a._dragRangeFlag=!0,a._touchStratX=b.touches&amp;&amp;b.touches[0]?b.touches[0].pageX:b.pageX,!1}),a.$ctrlDragAnchor.on(d.MOVE_EVENT,function(c){if(a._dragFlag){var d=a.$ctrlTrackBar.width(),e=a.duration,f=a.currentTime;clearTimeout(a._hideMainCtrlTime),clearTimeout(a._rewindForwardInterval);var g=function(c,d){a.$mid.oriShow(),f&gt;c?a.$midRewindForwardCon.addClass(&quot;rewind&quot;).removeClass(&quot;forward&quot;):a.$midRewindForwardCon.addClass(&quot;forward&quot;).removeClass(&quot;rewind&quot;),a._moveTime=c,a.$midTime.html(b.formatSeconds(c)),a.$ctrlCurPlayedBar.width(c/d*100+&quot;%&quot;)};a._touchMoveX=c.touches&amp;&amp;c.touches[0]?c.touches[0].pageX:c.pageX;var h=e/d*(a._touchStratX-a._touchMoveX)*-1,i=f+h;0&gt;i?g(0,e):i&gt;e?g(e,e):g(i,e)}return!1}),a.$ctrlDragAnchor.on(d.END_EVENT+&quot; mouseout&quot;,function(){return a._dragFlag&amp;&amp;(a._dragFlag=!1,a.seekTo(a._moveTime),a._startPlayTime=b.now(),a._rewindForwardInterval=setTimeout(function(){a.$midRewindForwardCon.oriHide()},2e3),a._hideMainCtrlTime=setTimeout(function(){a._hideMainCtrl()},3e3)),!1})},o=function(a){a.$ctrlBar.on(d.END_EVENT,function(){return!1}),a.$ctrlTrackBar.on(d.START_EVENT,function(c){var d=b(this),e=c.touches&amp;&amp;c.touches[0]?c.touches[0].pageX:c.pageX,f=e-d.offset().left,g=d.width(),h=a.duration/g*f;return a._startPlayTime=b.now(),a.seekTo(h),!1})};c.prototype._initCtrlProgress=function(){this._sendRealVVFlag=!1,this._sendEndFlag=!1,this._playByHistoryFlag=!1,this._makeHistoryFlag=!1,this._lastCurTime=0,this._startPlayTime=0,this._bufferCount=0,this._traceHeartInterval=null,this._rewindForwardInterval=null,this._dragRangeFlag=!1,this._changeModeFlag=!1,this._mediaAdOverFlag=!1,this._firstWaitingFlag=!0,this._dragFlag=!1,this._touchStratX=0,this._touchMoveX=0,this._moveTime=-1,m(this),&quot;live&quot;!==this.config.mediaType&amp;&amp;(n(this),o(this))}}),svp.define(&quot;player.dataService&quot;,function(a,b,c){&quot;use strict&quot;;var d=svp.$,e=a(&quot;data.videoInfo&quot;),f=a(&quot;data.liveInfo&quot;),g=a(&quot;data.copyright&quot;),h=a(&quot;player.errorTypes&quot;),i=function(a,b){var c={};c.site=a.site,c.liveId=d.isUndefined(a.liveId)?d.getUrlParam(&quot;liveId&quot;)||&quot;147&quot;:a.liveId,f.getData(c,function(a){g.check(a,function(c){var d={};d.code=c.code||&quot;&quot;,d.msg=c.msg||&quot;&quot;,d.data=a,b(d)})})},j=function(a,b){if(!d.isUndefined(a.fee)&amp;&amp;0!=a.fee||!d.isUndefined(a.h5Limit)&amp;&amp;a.h5Limit&gt;0||!d.isUndefined(a.mobileLimit)&amp;&amp;2==a.mobileLimit||!d.isUndefined(a.ipLimit)&amp;&amp;1==a.ipLimit)g.check(a,function(c){var d={};d.code=c.code||&quot;&quot;,d.msg=c.msg||&quot;&quot;,&quot;200&quot;!==d.code?(d.data=a,b(d)):e.getData(a,function(a){d.data=a,b(d)})});else{var c={};c.vid=a.vid,c.site=a.site,e.getData(c,function(a){g.check(a,function(c){var d={};d.code=c.code||&quot;&quot;,d.msg=c.msg||&quot;&quot;,d.data=a,b(d)})})}},k=function(a,b){var c={aid:a.aid||&quot;&quot;,areaId:a.areaId||6,cateCode:a.cateCode||&quot;&quot;,channeled:a.channeled||&quot;&quot;,cid:a.cid||&quot;&quot;,durations:Object,hike:a.hike||&quot;1&quot;,horHighPic:a.poster||&quot;&quot;,hor_big_pic:a.poster||&quot;&quot;,hor_high_pic:a.poster||&quot;&quot;,plid:a.plid||&quot;&quot;,sid:a.sid||&quot;&quot;,site:a.site||2,totalDuration:a.duration||&quot;&quot;,tvid:a.tvid||&quot;&quot;,tvname:a.title||&quot;&quot;,urls:{downloadUrl:[a.src],m3u8:[],mp4:[]},verHighPic:a.poster||&quot;&quot;,ver_high_pic:a.poster||&quot;&quot;,vid:a.vid||&quot;source&quot;,videoName:a.title||&quot;&quot;,video_name:a.title||&quot;&quot;,video_src:a.src||&quot;&quot;},d={};d.code=&quot;200&quot;,d.msg=h.PROCESS[200]||&quot;&quot;,d.data=c,b(d)},l={auto:function(a,b){d.isUndefined(a)&amp;&amp;alert(&quot;数据错误&quot;),b=d.isFunction(b)?b:function(){},d.isUndefined(a.liveId)?d.isUndefined(a.vid)?d.isUndefined(a.src)?alert(&quot;非法数据结构&quot;):k(a,b):j(a,b):i(a,b)},video:j,live:i,source:k};c.exports=l}),svp.define(&quot;player.errorTypes&quot;,function(a,b,c){&quot;use strict&quot;;var d={COPYRIGHT:{100:&quot;您所在的国家或地区，不在所播放的节目版权范围&quot;,101:&quot;该视频版权已到期，无法观看&quot;},PROCESS:{200:&quot;数据处理完成&quot;,201:&quot;无效数据,请刷新重试&quot;,202:&quot;无效视频数据&quot;,203:&quot;数据结构错误&quot;,204:&quot;解析数据出错&quot;},SUPPORT:{300:&quot;您的浏览器不支持播放功能，请使用搜狐视频客户端&quot;,301:&quot;该视频目前只支持5分钟观看，观看完整视频，请使用搜狐视频客户端&quot;,302:&quot;UC浏览器不支持播放功能，建议使用系统浏览器或请使用搜狐视频客户端&quot;,303:&quot;直播请使用搜狐视频客户端&quot;,304:&quot;本片仅供试看，如果需要观看更多内容，请下载搜狐视频App&quot;,305:&quot;您的浏览器不支持直播功能，请使用搜狐视频客户端&quot;},REQUEST:{400:&quot;网络超时，请刷新重试&quot;}};c.exports=d}),svp.define(&quot;player.events&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.vars&quot;),e=a(&quot;base.special&quot;),f=(a(&quot;base.console&quot;),a(&quot;player.errorTypes&quot;)),g=(a(&quot;trace.click&quot;),a(&quot;data.appDownload&quot;));c.prototype.on=function(a,b){var c=this;this._onDomLoaded(function(){&quot;ended&quot;===a||&quot;onended&quot;===a?c.eventProcess.userEnded.push({name:&quot;ended&quot;,process:function(){b.call(c)}}):c.$video.on(a,function(a){b.call(c,a)})})},c.prototype.off=function(a,b){var c=this;this._onDomLoaded(function(){a=a.toLowerCase(),c.$video.off(a,b)})},c.prototype.trigger=function(a){var b=this;this._onDomLoaded(function(){a=a.toLowerCase(),b.$video.trigger(a)})},c.prototype.one=function(a,b){var c=this;this._onDomLoaded(function(){a=a.toLowerCase(),&quot;ended&quot;===a?this.$video.on(a,function(){c.cache.curIndex===c.cache.totCounts-1&amp;&amp;c.$video.one(a,function(a){b.call(c,a)})}):this.$video.one(a,function(a){b.call(c,a)})})},c.prototype._addEvent=function(a,c,d){var f=this.eventProcess,g=this;if(a=a.toLowerCase(),!b.isUndefined(a)&amp;&amp;!b.isUndefined(f[a])){var h={},i=e.isAllowTimeupdateReplaceEnded()&amp;&amp;(&quot;ended&quot;===a||&quot;onended&quot;===a);b.isFunction(c)?(i?(a=&quot;timeupdate&quot;,h.process=function(){g.videoTag.duration-g.videoTag.currentTime&lt;.5&amp;&amp;c.call(g)}):h.process=function(){c.call(g)},h.name=&quot;_&quot;+a+(new Date).getTime(),f[a].push(h)):b.isString(c)&amp;&amp;b.isFunction(d)&amp;&amp;(h.process=i?function(){g.videoTag.duration-g.videoTag.currentTime&lt;.5&amp;&amp;d.call(g)}:function(){d.call(g)},h.name=c,f[a].push(h))}},c.prototype._removeEvent=function(a,c){var d=this.eventProcess;b.isUndefined(a)||b.isUndefined(d[a])||(b.isUndefined(c)?d[a]=[]:b.isString(c)&amp;&amp;b.each(d[a],function(b,e){e.name===c&amp;&amp;d[a].splice(b,1)}))},c.prototype._fireEvent=function(a){var c=this.eventProcess,d=this;b.isUndefined(a)||b.isUndefined(c[a])||b.each(c[a],function(a,b){b.process.call(d)})},c.prototype._onBaseEnded=function(){var a=this,c=a.cache;if(this._startPlayTime=b.now(),this._bufferCount=0,-1===c.curIndex&amp;&amp;(c.curIndex=0),d.IsBaiduBrowser||d.IsBaiduBoxApp){var e=c.srcList[c.modeType],h=0;if(b.each(e,function(a,b){return h+=b.duration,a&gt;=c.curIndex?!1:void 0}),c.timeLimit&gt;0&amp;&amp;h&gt;=c.timeLimit&amp;&amp;(b.isUndefined(a.adv)||!b.isUndefined(a.adv)&amp;&amp;player.adv.isMediaPlayed))return a.pause(),a.$video.remove(),void a._showMsg({text:f.SUPPORT[304],btns:{btnA:{text:&quot;立即下载&quot;,callback:function(){g.gotoDownload()}}}})}var i=c.getNextUrl();if(&quot;&quot;!==i)this.trigger(&quot;waiting&quot;),c.curPlayUrl=i,c.curIndex++,this.setSrc(c.curPlayUrl),setTimeout(function(){a.videoTag.play()},100),this.videoData.video_src=i;else{if(c.loop&amp;&amp;!c.isMediaAdContent){this.trigger(&quot;waiting&quot;);var j=c.getFirstUrl();this.setSrc(j),this.play(),c.curPlayUrl=j,c.curIndex=-1,this.videoData.video_src=j}else c.curPlayUrl=i;b.isUndefined(this.adv)||this.adv.isMediaPlayed||!d.IsAndroid?b.each(this.eventProcess.userEnded,function(a,b){b.process()}):this.trigger(&quot;advended&quot;)}this._nextPreLoadImg=null},c.prototype._onKeyDown=function(a,c){var d=a.keyCode||a.which||a.charCode,e=function(a){var b=c.getVolume();b+=a,c.setVolume(b)};if(!b.isUndefined(d))switch(d){case 38:e(.1);break;case 40:e(-.1);break;case 37:c.seekTo(c.currentTime-10);break;case 39:c.seekTo(c.currentTime+10)}},c.prototype._initEvent=function(){var a=this,c=this.eventProcess;this.$video&amp;&amp;this.$video.length&gt;0&amp;&amp;b.each(a.eventList,function(e,f){b.isArray(c[f])&amp;&amp;(d.IsSAMSUNGNote3&amp;&amp;&quot;ended&quot;!==f||!d.IsSAMSUNGNote3)&amp;&amp;a.$video.on(f,function(d){b(a.$video,a.$main).length&gt;0&amp;&amp;b.each(c[f],function(b,c){c.process.call(a,d)})})}),this._addEvent(&quot;ended&quot;,this._onBaseEnded),b(&quot;body&quot;).on(&quot;keydown&quot;,function(b){a._onKeyDown(b,a)})}}),svp.define(&quot;player.exception&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.vars&quot;),e=a(&quot;trace.click&quot;),f=a(&quot;base.util&quot;);c.prototype._sendException=function(a){e.pingback(null,&quot;foxplayer&quot;,a)};var g=function(a){if(/Win32|Win64|Windows|Mac68K|MacPC|Macintosh|MacIntel/i.test(window.navigator.platform))return!1;if(/2g|3g/i.test(f.getConnectionType()))return!1;var c=a.cache;a._sendException({}),d.IsIOS?a.trigger(&quot;ended&quot;):d.IsAndroid&amp;&amp;(c.curIndex&lt;c.totCounts?(a.pause(),a._showLoading(),a.cache.curPlayUrl=a.cache.getNextUrl(),a.setSrc(a.cache.curPlayUrl),c.curIndex++,a.play()):!b.isUndefined(a.adv)&amp;&amp;a.adv.isMediaPlayed?a.adv.gotoEnd():a.trigger(&quot;ended&quot;))},h=function(a){a._addEvent(&quot;error&quot;,function(){g(a)})},i=function(){};c.prototype._initException=function(){h(this),i(this)}}),svp.define(&quot;player.flash&quot;,function(a,b,c){var d=svp.$,e=a(&quot;base.vars&quot;),f=a(&quot;base.console&quot;),g=a(&quot;player.mediaPlayer&quot;),h=a(&quot;player.settings&quot;),i=(a(&quot;base.special&quot;),a(&quot;trace.video&quot;),a(&quot;player.errorTypes&quot;),a(&quot;base.cookie&quot;)),j=(a(&quot;trace&quot;),a(&quot;trace.video&quot;)),k=(a(&quot;trace.click&quot;),a(&quot;player.dataService&quot;)),l=e.IsIEBrowser;g.prototype._init=function(a){this._initAdvFlag=!1,this._hideMainCtrlTime=null,this._firstLoadFlag=!0,this._dataTimeout=3e3,this.config=h.initConfig(a);var b={},c=this.config.data||{};b=d.isArray(c.videoDataList)&amp;&amp;c.videoDataList.length&gt;0?c.videoDataList[0]:d.isArray(c.vidList)&amp;&amp;c.vidList.length&gt;0?{vid:c.vidList[0],site:c.site||&quot;1&quot;}:c,this.localFlashData=b,this.config.share=this.config.share?!0:!1,this.vrsPlayer=null,this.swfObj=null,this.flashEmbed=&quot;&quot;,this.pluginsvars=&quot;&quot;,f.log(this.config)},g.prototype.htmlTo=function(a){a=d(a);var b=this;this.$parentDom=a||d(&quot;.sohu_player&quot;),this.$player=d(&quot;#&quot;+this.config.mainId),this._getDataFlag=!1,k.video(this.localFlashData,function(a){&quot;200&quot;!==a.code||d.isUndefined(a.data)?f.log(&quot;数据无效&quot;):b.localFlashData=a.data});b.MakeFlashPlayer(b.config.share,b.localFlashData);return window.swfGotoNewPage=function(){},b},window.Trace.flashOnPlay=function(){f.log(&quot;flash onplay&quot;)},window.Trace.flashOnPlayed=function(){f.log(&quot;flash onPlayed&quot;)},window.Trace.flashOnStop=function(){f.log(&quot;flash onstop&quot;)},window.Trace.flashOnPause=function(){f.log(&quot;flash onPause&quot;)},g.prototype.MakeFlashVideoVars=function(a,b){var c=this,d=&quot;&amp;imgCutBtn=1&amp;showRecommend=1&amp;autoplay=true&amp;sogouBtn=0&amp;shareBtn=1&amp;topBarFull=0&amp;datashare=0&amp;topBar=0&amp;topBarNor=0&amp;skin=0&amp;skinNum=1&amp;topBarFull=0&amp;downloadBtn=1&amp;domain=inner&amp;oad=&amp;ead=&amp;pad=&amp;showTipHistory=0&amp;seekTo=0&amp;jump=0&amp;isWriteComm=0&quot;;try{var f=b.site||&quot;1&quot;,g=b.cid||&quot;&quot;;d=&quot;9001&quot;==g||&quot;2&quot;==f?d+&quot;&amp;id=&quot;+(b.vid||&quot;&quot;):d+&quot;&amp;vid=&quot;+(b.vid||&quot;&quot;),d=d+&quot;&amp;pageurl=&quot;+encodeURI(location.href),d=d+&quot;&amp;nid=&quot;+(b.nid||&quot;&quot;),d=d+&quot;&amp;sid=&quot;+(i.get(&quot;SUV&quot;)||b.sid||&quot;&quot;),d=d+&quot;&amp;api_key=&quot;+e.API_KEY,c.pluginsvars=d}catch(h){}return d},g.prototype.getFlashVersion=function(){var a,b=0;if(l)a=new ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;),a&amp;&amp;(b=parseInt(a.GetVariable(&quot;$version&quot;).split(&quot; &quot;)[1].split(&quot;,&quot;)[0],10));else{var c=window.navigator.plugins;if(c&amp;&amp;c.length&gt;0&amp;&amp;(a=c[&quot;Shockwave Flash&quot;]))for(var d=a.description.split(&quot; &quot;),e=0,f=d.length;f&gt;e;e++){var g=parseInt(d[e],10);if(!isNaN(g)){b=g;break}}}return b},g.prototype.MakeFlashPlayer=function(a,b){var c=this,g=c.getFlashVersion(),h=&quot;&quot;,i=b.vid||a.vid,k=g&amp;&amp;i;if(k){try{{j.vv()}c.vrsPlayer=&quot;http://tv.sohu.com/upload/swf/201503161/Main.swf&quot;;var m={pluginspage:&quot;http://www.adobe.com/go/getflashplayer&quot;,type:&quot;application/x-shockwave-flash&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,allowfullscreen:&quot;true&quot;,allowscriptaccess:&quot;always&quot;,wmode:&quot;Opaque&quot;,quality:&quot;high&quot;,shareBtn:&quot;0&quot;,skinNum:&quot;1&quot;,api_key:e.API_KEY,src:c.vrsPlayer},n=c.MakeFlashVideoVars(a,b),o=[];l&amp;&amp;o.push(&#x27;&lt;object width=&quot;100%&quot; height=&quot;100%&quot; &gt;&#x27;),o.push(&#x27;&lt;embed id=&quot;sohuplayer&quot;&#x27;);for(var p in m)o.push(&quot; &quot;+p+&#x27;=&quot;&#x27;+m[p]+&#x27;&quot;&#x27;);o.push(&#x27; flashvars=&quot;&#x27;+n+&#x27;&quot; &#x27;),o.push(&quot;&gt;&lt;/embed&gt;&quot;),l&amp;&amp;o.push(&quot;&lt;/object&gt;&quot;),h=o.join(&quot;&quot;),f.log(&quot;@@@@ makeFlashHtml flashEmbed &quot;,h),c.flashEmbed=h,c.$parentDom.addClass(&quot;sohuplayer&quot;),d(c.$parentDom).html(h),j.realVV()}catch(q){f.log(q)}return!0}return!1},g.prototype.MakeFlashSwfObjPlayer=function(a,b){var c=this,g=c.getFlashVersion(),h=&quot;&quot;,k=b.vid||a.vid,l=g&amp;&amp;k;return l?(svp.seajs.jsLoader(&quot;http://js.tv.itc.cn/base/plugin/swfobject_97e55f.js&quot;,function(){var a,g=&quot;http://tv.sohu.com/upload/swf/201503161/Main.swf&quot;;&quot;9001&quot;==b.cid||&quot;2&quot;==b.site?(g=g+&quot;?id=&quot;+k+&quot;&amp;imgCutBtn=1&amp;showRecommend=1&amp;autoplay=true&amp;sogouBtn=0&amp;shareBtn=1&amp;topBarFull=0&amp;datashare=0&amp;topBar=0&amp;topBarNor=0&amp;skin=0&amp;skinNum=1&amp;topBarFull=0&amp;downloadBtn=1&amp;domain=inner&amp;oad=&amp;ead=&amp;pad=&amp;showTipHistory=0&amp;seekTo=0&amp;jump=0&amp;isWriteComm=0&amp;api_key=&quot;+e.API_KEY,a=new SWFObject(g,&quot;sohuplayer&quot;,&quot;100%&quot;,&quot;100%&quot;,&quot;9,0,115&quot;,&quot;#000000&quot;)):(a=new SWFObject(g,&quot;sohuplayer&quot;,&quot;100%&quot;,&quot;100%&quot;,&quot;9,0,115&quot;,&quot;#000000&quot;),a.addVariable(&quot;skinNum&quot;,&quot;1&quot;),a.addVariable(&quot;pageurl&quot;,location.href),a.addVariable(&quot;vid&quot;,b.vid||&quot;&quot;),a.addVariable(&quot;pid&quot;,b.pid||&quot;&quot;),a.addVariable(&quot;nid&quot;,&quot;&quot;),a.addVariable(&quot;seekTo&quot;,&quot;0&quot;),a.addVariable(&quot;jump&quot;,&quot;0&quot;),a.addVariable(&quot;autoplay&quot;,&quot;true&quot;),a.addVariable(&quot;showRecommend&quot;,&quot;0&quot;),a.addVariable(&quot;sid&quot;,i.get(&quot;SUV&quot;)||b.sid||&quot;&quot;),a.addVariable(&quot;api_key&quot;,e.API_KEY)),a.addParam(&quot;wmode&quot;,&quot;Opaque&quot;),a.addParam(&quot;quality&quot;,&quot;high&quot;),a.addParam(&quot;allowscriptaccess&quot;,&quot;always&quot;),a.addParam(&quot;allowfullscreen&quot;,&quot;true&quot;),a.addParam(&quot;width&quot;,&quot;100%&quot;),a.addParam(&quot;height&quot;,&quot;100%&quot;),h=a.getFlashHtml(),c.swfObj=a,f.log(&quot;@@@@ MakeFlashSwfObjPlayer flashEmbed &quot;,h),c.flashEmbed=h,f.log(c.swfObj),c.$parentDom.addClass(&quot;sohuplayer&quot;),d(c.$parentDom).html(h),j.realVV()}),!0):!1},c.exports=g}),svp.define(&quot;player.foxPlayer&quot;,function(a,b,c){&quot;use strict&quot;;a(&quot;player.events&quot;),a(&quot;player.adv&quot;),a(&quot;player.controls&quot;),a(&quot;player.update&quot;),a(&quot;player.poster&quot;),a(&quot;player.message&quot;),a(&quot;player.videoList&quot;),a(&quot;player.cooperation&quot;),a(&quot;player.exception&quot;),a(&quot;player.showRecommend&quot;);var d=svp.$,e=a(&quot;base.vars&quot;),f=a(&quot;base.console&quot;),g=a(&quot;player.mediaPlayer&quot;),h=a(&quot;player.html5UI&quot;),i=a(&quot;player.settings&quot;),j=a(&quot;trace.video&quot;),k=a(&quot;player.errorTypes&quot;);g.prototype._init=function(a){this._initAdvFlag=!1,this._hideMainCtrlTime=null,this._firstLoadFlag=!0,this._dataTimeout=3e3,this._showRecommendFlag=!1,this._sendVVFlag=!1,this.config=i.initConfig(a),this._sendPlayDisplayCompleteFlag=!1},g.prototype.htmlTo=function(a){if(a=d(a),a.length&gt;0){var b=this;if(this.$parentDom=a,d.isUndefined(this.$player)){svp.debug.playerLoadDomStartTime=Date.now(),a.html(h.makeLoadingTmpl(this.config)),f.log(&quot;加载loading完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadDomStartTime)/1e3),this.$player=d(&quot;#&quot;+this.config.mainId),this.$playerLoading=d(&quot;#&quot;+this.config.mainId+&quot; .svp_player_loading&quot;),this._getDataFlag=!1;var c=this.config.data;if(d.isUndefined(c))b._showMsg({text:k.PROCESS[202]});else if(d.isUndefined(c.vidList)&amp;&amp;d.isUndefined(c.videoDataList)){var e={videoDataList:[c]};this.videoList=this._videoList(e),this.updateMedia(c)}else{var g,i=this.videoList=this._videoList(c);try{g=&quot;vidList&quot;===i.type?{vid:i.vidList[i.curIndex],site:i.site}:i.videoDataList[i.curIndex]}catch(j){b._showMsg({text:k.PROCESS[204]})}this.updateMedia(g)}}else this.$parentDom.html(this.$main),this.cache.autoplay&amp;&amp;this._playOrPause(&quot;play&quot;)}},g.prototype._initDoms=function(){var a=&quot;#&quot;+this.config.mainId;this.$main=d(a),this.$loading=d(a+&quot; .svp_player_loading&quot;),this.$loadingDesc=d(a+&quot; .svp_player_loading_notice&quot;),this.$video=d(a+&quot; #&quot;+this.config.elemId),this.videoTag=d(a+&quot; #&quot;+this.config.elemId)[0],this.$titleCon=d(a+&quot; .svp_title&quot;),this.$title=d(a+&quot; .svp_title_content&quot;),this.$posterCon=d(a+&quot; .svp_poster&quot;),this.$posterRight=d(a+&quot; .svp_poster_right&quot;),this.$posterAdTime=d(a+&quot; .svp_poster_ad_time&quot;),this.$mid=d(a+&quot; .svp_mid&quot;),this.$midPlay=d(a+&quot; .svp_mid_play&quot;),this.$midRewindForwardCon=d(a+&quot; .svp_mid_rewind_forward&quot;),this.$midTime=d(a+&quot; .svp_mid_time&quot;),this.$midModeListCon=d(a+&quot; .svp_mid_mode&quot;),this.$mideCurModeBtn=d(a+&quot; .svp_mid_cur_mode_btn&quot;),this.$midCurMode=d(a+&quot; .svp_mid_cur_mode&quot;),this.$midModeList=d(a+&quot; .svp_mid_mod_list&quot;),this.$midModeLi=d(a+&quot; .svp_mid_mod_list li&quot;),this.$ctrlCon=d(a+&quot; .svp_ctrl&quot;),this.$ctrlBar=d(a+&quot; .svp_ctrl_bar&quot;),this.$ctrlPlay=d(a+&quot; .svp_ctrl_play&quot;),this.$ctrlPause=d(a+&quot; .svp_ctrl_pause&quot;),this.$ctrlBuffer=d(a+&quot; .svp_ctrl_buffer&quot;),this.$ctrlPointsCon=d(a+&quot; .svp_ctrl_points&quot;),this.$ctrlCurPlayedBar=d(a+&quot; .svp_ctrl_played_bar&quot;),this.$ctrlTime=d(a+&quot; .svp_ctrl_time&quot;),this.$ctrlCurTime=d(a+&quot; .svp_ctrl_cur_time&quot;),this.$ctrlDuration=d(a+&quot; .svp_ctrl_duration&quot;),this.$ctrlDragAnchor=d(a+&quot; .svp_ctrl_drag_anchor&quot;),this.$ctrlTrackBar=d(a+&quot; .svp_ctrl_track_bar&quot;),this.$ctrlScreen=d(a+&quot; .svp_ctrl_screen&quot;),this.$ctrlFullScreen=d(a+&quot; .svp_ctrl_full_screen&quot;),this.$ctrlShrinkScreen=d(a+&quot; .svp_ctrl_shrink_screen&quot;),this.$maskLayer=d(a+&quot; .svp_mask_layer&quot;),this.$pauseAdCon=d(a+&quot; .svp_ad_pause&quot;),this.$pauseAdCloseBtn=d(a+&quot; .svp_ad_pause_close&quot;)},g.prototype._playOrPause=function(a){var b=this;svp.debug.playerPlayStartTime=Date.now(),clearTimeout(this._hideMainCtrlTime),&quot;pause&quot;===a?(this._pause(),e.IsNewWindowsPhone?setTimeout(function(){b._showPlayBtn()},300):this._showPlayBtn(),this._showMainCtrl()):(this._initAdvFlag||(this.adInit(),this._initAdvFlag=!0),this.adv&amp;&amp;this._adUpdateFlag&amp;&amp;(this.adv.updateAdv(this),this._adUpdateFlag=!1),(!this.adv||this.adv.isMediaPlayed)&amp;&amp;this._showMainCtrl(),!this._sendVVFlag&amp;&amp;(e.IsBaiduBrowser||e.IsBaiduBoxApp||e.IsIOS&amp;&amp;(e.IsQQBrowser||e.IsUCBrowser))&amp;&amp;(f.log(&quot;统计: vv&quot;),j.vv(),this._sendVVFlag=!0),!this._sendRealVVFlag&amp;&amp;((/QQBrowser\/5\./i.test(e.UA)||e.IsUCBrowser)&amp;&amp;e.IsIOS||(d.isUndefined(this.adv)||this.adv.isMediaPlayed)&amp;&amp;e.IsBaiduBoxApp)&amp;&amp;(f.log(&quot;统计: reallvv&quot;),j.realVV(this._startPlayTime),this._sendRealVVFlag=!0,this.$video.attr(&quot;data-adover&quot;,&quot;true&quot;),this._cooperatorVideoAttr()),(e.IsUCBrowser||e.IsQQBrowser)&amp;&amp;this.$video.oriShow(),(/UCBrowser\/9\./i.test(e.UA)||e.IsSonyPhone||e.IsVivoPhone||e.IsUCBrowser)&amp;&amp;e.IsAndroid?setTimeout(function(){b._play()},50):e.IsWindowsPhone?setTimeout(function(){b._play()},300):!this._firstLoadFlag&amp;&amp;e.IsIOS&amp;&amp;e.IsQQBrowser?setTimeout(function(){b._play()},50):this._play(),this._startPlayTime=d.now(),this._hideMainCtrlTime=setTimeout(function(){b._hideMainCtrl()},3e3),this._firstLoadFlag?(e.IsIphone||e.IsBaiduBrowser||!this.cache.autoplay||(this.$midPlay.oriShow(),this._showPlayBtn(),this.showPoster()),this._firstLoadFlag=!1):e.IsBaiduBrowser?this._hideLoading():this._showLoading(),(e.IsIphone||e.IsOldWindowsPhone||e.IsQQBrowser||e.IsBaiduBrowser)&amp;&amp;this._showMidPlayBtn(),e.IsIphone&amp;&amp;(e.IsUCBrowser||e.IsQQBrowser)&amp;&amp;this._showMainCtrl())},g.prototype._autoNextVideoService=function(){var a=this;a.config.isShowRecommend&amp;&amp;(a._showRecommendFlag=!0,this.on(&quot;ended&quot;,function(){setTimeout(function(){if(a._showRecommendFlag){f.log(&quot;显示相关推荐&quot;);var b=a.videoList,c=b.curIndex,d=null;&quot;vidList&quot;===b.type&amp;&amp;c&lt;b.vidList.length-1?(b.curIndex++,d={vid:b.vidList[b.curIndex],site:b.site}):&quot;videoDataList&quot;===b.type&amp;&amp;c&lt;b.videoDataList.length-1&amp;&amp;(b.curIndex++,d=b.videoDataList[b.curIndex]),f.log(&quot;nextVideo&quot;+d),null!==d?a.updateMedia(d,!0):(f.log(&quot;showRecommend 11&quot;),a.showRecommend())}},800)}))},c.exports=g}),svp.define(&quot;player.html5UI&quot;,function(a,b,c){&quot;use strict&quot;;{var d=svp.$,e=svp.template,f=a(&quot;base.vars&quot;),g=a(&quot;base.special&quot;),h=a(&quot;player.settings&quot;),i={},j={param:{},model:{},view:{},ctrl:{}},k=(j.param,j.model),l=j.view;j.ctrl}k.parseCache=function(a){var b={title:a.title||&quot;&quot;,poster:a.poster||&quot;&quot;,pointList:[{left:0}],mainId:a.mainId||&quot;svp_main_1&quot;,height:a.height||&quot;100%&quot;,width:a.width||&quot;100%&quot;,srcType:a.srcType||&quot;mp4&quot;,elemId:a.elemId||&quot;&quot;,autoplay:a.autoplay||!1,defControls:a.defControls||!1,isInitSrc:!1,isIphone:f.IsIphone||!1,isUCBrowser:f.IsUCBrowser||!1,isQQBrowser:f.IsQQBrowser||!1,curMode:a.modeType||&quot;&quot;,curModeName:h.PLAY_MODE[a.modeType],selList:[]};return a.mediaAdPlatform&amp;&amp;g.isAllowPlayAdv()&amp;&amp;(a.mediaAdPlatform.indexOf(&quot;ios&quot;)&gt;-1&amp;&amp;f.IsIOS||a.mediaAdPlatform.indexOf(&quot;android&quot;)&gt;-1&amp;&amp;f.IsAndroid)||(b.isInitSrc=!0),d.each(a.modeTypeList,function(a,c){if(c!==b.curMode){var d={mode:c,modeName:h.PLAY_MODE[c]};b.selList.push(d)}}),b},k.parseConfig=function(a){var b={mainId:a.mainId||&quot;svp_main_1&quot;,height:a.height||&quot;100%&quot;,width:a.width||&quot;100%&quot;};return b},l.videoTag=function(){var a=&#x27;&lt;div class=&quot;video&quot;&gt;&lt;% if (srcType === &quot;client&quot;) { %&gt;&lt;div data-noSupport=&quot;noSupport&quot;&lt;% } else { %&gt;&lt;video&lt;% } %&gt; id=&quot;&lt;%=elemId%&gt;&quot;&lt;% if (autoplay) { %&gt; autoplay&lt;% } %&gt;&lt;% if (defControls) { %&gt; controls&lt;% } %&gt; x-webkit-airplay=&quot;isHtml5UseAirPlay&quot; data-adover=&quot;false&quot;&lt;% if (autoplay) { %&gt; preload=&quot;none&quot;&lt;% }%&gt;&lt;% if (isInitSrc) { %&gt; src=&quot;&lt;%=curPlayUrl%&gt;&quot;&lt;% }%&gt; height=&quot;&lt;%=height%&gt;&quot; width=&quot;&lt;%=width%&gt;&quot;&lt;% if (isIphone) { %&gt; style=&quot;position:absolute; left:-200%;&quot;&lt;% } else if (!autoplay &amp;&amp; isUCBrowser) { %&gt; style=&quot;display: none;&quot;&lt;% } %&gt;&gt;&lt;/div&gt;&#x27;;return a},l.ctrl=function(){var a=&#x27;&lt;div class=&quot;player_controls svp_ctrl&quot;&gt;&lt;div class=&quot;mid svp_mid&quot;&gt;&lt;span class=&quot;mid_play svp_mid_play white&quot;&gt;&lt;b&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class=&quot;mid_rewind_forward rewind svp_mid_rewind_forward&quot; style=&quot;display:none;&quot;&gt;&lt;b class=&quot;mid_forward&quot;&gt;&lt;/b&gt;&lt;b class=&quot;mid_rewind&quot;&gt;&lt;/b&gt;&lt;span class=&quot;mid_time svp_mid_time&quot;&gt;02:04&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;slider_bar svp_ctrl_bar&quot;&gt;&lt;div class=&quot;left_btn_play&quot;&gt;&lt;div class=&quot;svp_ctrl_play&quot;&gt;&lt;b class=&quot;state_play&quot;&gt;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;svp_ctrl_pause&quot; style=&quot;display:none;&quot;&gt;&lt;b class=&quot;state_pause&quot;&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;action_trackBar svp_ctrl_track_bar&quot;&gt;&lt;% if (!((isUCBrowser || isQQBrowser) &amp;&amp; isIphone)) { %&gt;&lt;div class=&quot;trackbar&quot;&gt;&lt;b class=&quot;buffered svp_ctrl_buffer&quot;&gt;&lt;/b&gt;&lt;div class=&quot;click_area svp_ctrl_click_area&quot;&gt;&lt;div class=&quot;time_points svp_ctrl_points&quot;&gt;&lt;% for (var i = 0, l = pointList.length; i &lt; l; i++) { %&gt;&lt;em style=&quot;left:&lt;%=pointList[i].left%&gt;&quot;&gt;&lt;/em&gt;&lt;% } %&gt;&lt;/div&gt;&lt;/div&gt;&lt;b class=&quot;played svp_ctrl_played_bar&quot;&gt;&lt;em class=&quot;handle svp_ctrl_drag_anchor&quot;&gt;&lt;/em&gt;&lt;/b&gt;&lt;/div&gt;&lt;% } %&gt;&lt;/div&gt;&lt;% if (!((isUCBrowser || isQQBrowser) &amp;&amp; isIphone)) { %&gt;&lt;div class=&quot;time svp_ctrl_time&quot;&gt;&lt;b class=&quot;current_time svp_ctrl_cur_time&quot;&gt;00:00&lt;/b&gt; / &lt;span class=&quot;duration svp_ctrl_duration&quot; data-key=&quot;totalDuration&quot; data-type=&quot;time&quot;&gt;00:00&lt;/span&gt;&lt;/div&gt;&lt;% } %&gt;&lt;div class=&quot;controllers svp_ctrl_screen&quot;&gt;&lt;div class=&quot;fullscreen disabled svp_ctrl_full_screen&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;shrinkscreen disabled svp_ctrl_shrink_screen&quot; style=&quot;display:none;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;;return a},l.playMode=function(){var a=&#x27;&lt;% if (curMode !== &quot;&quot; &amp;&amp; selList.length &gt; 0) { %&gt;&lt;div class=&quot;quality_button quality_container svp_mid_mode&lt;% if (selList.length &gt; 2) { %&gt; smaller&lt;% } %&gt;&quot;&gt;&lt;% if (selList.length &gt; 0) { %&gt;&lt;div class=&quot;quality_definition_button svp_mid_cur_mode_btn&quot;&gt;&lt;span class=&quot;svp_mid_cur_mode&quot; data-mode=&quot;&lt;%=curMode%&gt;&quot;&gt;&lt;%=curModeName%&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;quality_definition_list&quot;&gt;&lt;ul class=&quot;svp_mid_mod_list&quot;&gt;&lt;% for (var i = 0, l = selList.length; i &lt; l; i++) { %&gt;&lt;li data-mode=&quot;&lt;%=selList[i].mode%&gt;&quot;&gt;&lt;span&gt;&lt;%=selList[i].modeName%&gt;&lt;/span&gt;&lt;/li&gt;&lt;% } %&gt;&lt;/ul&gt;&lt;/div&gt;&lt;% } %&gt;&lt;/div&gt;&lt;% } %&gt;&#x27;;return a},l.video=function(){var a=&#x27;&lt;div class=&quot;player_main svp_player_main&quot;&gt;&#x27;+l.videoTag()+&#x27;&lt;div class=&quot;video_title svp_title&quot;&gt;&lt;strong&gt;&lt;span class=&quot;svp_title_content title_content&quot;&gt;&lt;%=title%&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/div&gt;&lt;div class=&quot;poster svp_poster&quot; style=&quot;background-image:url(&lt;%=poster%&gt;);&quot;&gt;&lt;/div&gt;&#x27;+l.ctrl()+&#x27;&lt;div class=&quot;ad-img svp_ad_pause&quot;&gt;&lt;em class=&quot;svp_ad_pause_close&quot;&gt;&lt;/em&gt;&lt;/div&gt;&#x27;+l.playMode()+&#x27;&lt;div class=&quot;mask-layer svp_mask_layer&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;;

return a},l.loading=function(){var a=&#x27;&lt;div class=&quot;player inline_player&quot; id=&quot;&lt;%=mainId%&gt;&quot; style=&quot;height:&lt;%=height%&gt;; width:&lt;%=width%&gt;&quot;&gt;&lt;div class=&quot;svp_player_loading player_loading&quot;&gt;&lt;/div&gt;&lt;div class=&quot;svp_player_loading_notice player_loading_notice&quot;&gt;努力加载中,请稍后...&lt;/div&gt;&lt;/div&gt;&#x27;;return a},i.makeVideoTmpl=function(a){var b=e.compile(l.video()),c=k.parseCache(a);return b(c)},i.makeLoadingTmpl=function(a){var b=e.compile(l.loading()),c=k.parseConfig(a);return b(c)},c.exports=i}),svp.define(&quot;player.liveUI&quot;,function(a,b,c){&quot;use strict&quot;;{var d=svp.$,e=svp.template,f=a(&quot;base.vars&quot;),g=a(&quot;base.special&quot;),h=a(&quot;player.settings&quot;),i={},j={param:{},model:{},view:{},ctrl:{}},k=(j.param,j.model),l=j.view;j.ctrl}k.parseCache=function(a){var b={title:a.title||&quot;&quot;,poster:a.poster||&quot;&quot;,pointList:[{left:0}],mainId:a.mainId||&quot;svp_main_1&quot;,height:a.height||&quot;100%&quot;,width:a.width||&quot;100%&quot;,srcType:a.srcType||&quot;mp4&quot;,elemId:a.elemId||&quot;&quot;,autoplay:a.autoplay||!1,defControls:a.defControls||!1,isInitSrc:!1,isIphone:f.IsIphone||!1,isUCBrowser:f.IsUCBrowser||!1,volume:a.volume||1,curMode:a.modeType||&quot;&quot;,curModeName:h.PLAY_MODE[a.modeType],selList:[]};return a.mediaAdPlatform&amp;&amp;g.isAllowPlayAdv()&amp;&amp;(a.mediaAdPlatform.indexOf(&quot;ios&quot;)&gt;-1&amp;&amp;f.IsIOS||a.mediaAdPlatform.indexOf(&quot;android&quot;)&gt;-1&amp;&amp;f.IsAndroid)||(b.isInitSrc=!0),d.each(a.modeTypeList,function(a,c){if(c!==b.curMode){var d={mode:c,modeName:h.PLAY_MODE[c]};b.selList.push(d)}}),b},k.parseConfig=function(a){var b={mainId:a.mainId||&quot;svp_main_1&quot;,height:a.height||&quot;100%&quot;,width:a.width||&quot;100%&quot;};return b},l.videoTag=function(){var a=&#x27;&lt;div class=&quot;video&quot;&gt;&lt;% if (srcType === &quot;client&quot;) { %&gt;&lt;div data-nosupport=&quot;noSupport&quot;&lt;% } else { %&gt;&lt;video&lt;% } %&gt; id=&quot;&lt;%=elemId%&gt;&quot;&lt;% if (autoplay) { %&gt; autoplay&lt;% } %&gt;&lt;% if (defControls) { %&gt; controls&lt;% } %&gt; x-webkit-airplay=&quot;isHtml5UseAirPlay&quot;&lt;% if (isWeixinBrowser) { %&gt; webkit-playsinline&lt;% } %&gt; data-adover=&quot;false&quot;&lt;% if (autoplay) { %&gt; preload=&quot;none&quot;&lt;% }%&gt;&lt;% if (isInitSrc) { %&gt; src=&quot;&lt;%=curPlayUrl%&gt;&quot;&lt;% }%&gt; height=&quot;&lt;%=height%&gt;&quot; width=&quot;&lt;%=width%&gt;&quot;&lt;% if (isIphone) { %&gt; style=&quot;position:absolute; left:-200%;&quot;&lt;% } else if (!autoplay &amp;&amp; isUCBrowser) { %&gt; style=&quot;display: none;&quot;&lt;% } %&gt; volume=&quot;&lt;%=volume%&gt;&quot;&gt;&lt;/div&gt;&#x27;;return a},l.ctrl=function(){var a=&#x27;&lt;div class=&quot;player_controls svp_ctrl&quot;&gt;&lt;div class=&quot;mid svp_mid&quot;&gt;&lt;span class=&quot;mid_play svp_mid_play white&quot;&gt;&lt;b&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class=&quot;mid_rewind_forward rewind svp_mid_rewind_forward&quot; style=&quot;display:none;&quot;&gt;&lt;b class=&quot;mid_forward&quot;&gt;&lt;/b&gt;&lt;b class=&quot;mid_rewind&quot;&gt;&lt;/b&gt;&lt;span class=&quot;mid_time svp_mid_time&quot;&gt;02:04&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;message&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;div class=&quot;slider_bar svp_ctrl_bar&quot;&gt;&lt;div class=&quot;left_btn_play&quot;&gt;&lt;div class=&quot;svp_ctrl_play&quot;&gt;&lt;b class=&quot;state_play&quot;&gt;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;svp_ctrl_pause&quot; style=&quot;display:none;&quot;&gt;&lt;b class=&quot;state_pause&quot;&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;action_trackBar svp_ctrl_track_bar&quot;&gt;&lt;div class=&quot;trackbar&quot;&gt;&lt;b class=&quot;buffered svp_ctrl_buffer&quot;&gt;&lt;/b&gt;&lt;div class=&quot;click_area svp_ctrl_click_area&quot;&gt;&lt;div class=&quot;time_points svp_ctrl_points&quot;&gt;&lt;% for (var i = 0, l = pointList.length; i &lt; l; i++) { %&gt;&lt;em style=&quot;left:&lt;%=pointList[i].left%&gt;&quot;&gt;&lt;/em&gt;&lt;% } %&gt;&lt;/div&gt;&lt;/div&gt;&lt;b class=&quot;played svp_ctrl_played_bar&quot;&gt;&lt;em class=&quot;handle svp_ctrl_drag_anchor&quot;&gt;&lt;/em&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;time svp_ctrl_time&quot;&gt;LIVE&lt;/div&gt;&lt;div class=&quot;controllers svp_ctrl_screen&quot;&gt;&lt;div class=&quot;fullscreen disabled svp_ctrl_full_screen&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;shrinkscreen disabled svp_ctrl_shrink_screen&quot; style=&quot;display:none;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;;return a},l.playMode=function(){var a=&#x27;&lt;% if (curMode !== &quot;&quot; &amp;&amp; selList.length &gt; 0) { %&gt;&lt;div class=&quot;quality_button quality_container svp_mid_mode&quot;&gt;&lt;% if (selList.length &gt; 0) { %&gt;&lt;div class=&quot;quality_definition_button svp_mid_cur_mode_btn&quot;&gt;&lt;span class=&quot;svp_mid_cur_mode&quot; data-mode=&quot;&lt;%=curMode%&gt;&quot;&gt;&lt;%=curModeName%&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;quality_definition_list&quot;&gt;&lt;ul class=&quot;svp_mid_mod_list&quot;&gt;&lt;% for (var i = 0, l = selList.length; i &lt; l; i++) { %&gt;&lt;li data-mode=&quot;&lt;%=selList[i].mode%&gt;&quot;&gt;&lt;span&gt;&lt;%=selList[i].modeName%&gt;&lt;/span&gt;&lt;/li&gt;&lt;% } %&gt;&lt;/ul&gt;&lt;/div&gt;&lt;% } %&gt;&lt;/div&gt;&lt;% } %&gt;&#x27;;return a},l.video=function(){var a=&#x27;&lt;div class=&quot;player_main svp_player_main&quot;&gt;&#x27;+l.videoTag()+&#x27;&lt;div class=&quot;video_title svp_title&quot;&gt;&lt;strong&gt;&lt;span class=&quot;svp_title_content&quot;&gt;&lt;%=title%&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/div&gt;&lt;div class=&quot;poster svp_poster&quot; style=&quot;background-image:url(&lt;%=poster%&gt;);background-color:#444;&quot;&gt;&lt;/div&gt;&#x27;+l.ctrl()+&#x27;&lt;div class=&quot;ad-img svp_ad_pause&quot;&gt;&lt;em class=&quot;svp_ad_pause_close&quot;&gt;&lt;/em&gt;&lt;/div&gt;&#x27;+l.playMode()+&#x27;&lt;div class=&quot;mask-layer svp_mask_layer&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;;return a},l.loading=function(){var a=&#x27;&lt;div class=&quot;svp_player player inline_player&quot; id=&quot;&lt;%=mainId%&gt;&quot; style=&quot;height:&lt;%=height%&gt;; width:&lt;%=width%&gt;&quot;&gt;&lt;div class=&quot;svp_player_loading&quot;&gt;&lt;/div&gt;&lt;div class=&quot;svp_player_loading_notice&quot;&gt;努力加载中,请稍后...&lt;/div&gt;&lt;/div&gt;&#x27;;return a},i.makeVideoTmpl=function(a){var b=e.compile(l.video()),c=k.parseCache(a);return b(c)},i.makeLoadingTmpl=function(a){var b=e.compile(l.loading()),c=k.parseConfig(a);return b(c)},c.exports=i}),svp.define(&quot;player.loadCacheData&quot;,function(a,b,c){&quot;use strict&quot;;var d=a(&quot;base.vars&quot;),e=a(&quot;base.cookie&quot;),f=a(&quot;base.util&quot;),g=a(&quot;base.support&quot;),h=a(&quot;base.special&quot;),i=a(&quot;base.action&quot;),j=svp.$,k={isMediaAdContent:!1,vid:&quot;&quot;,elemId:&quot;&quot;,poster:&quot;&quot;,posterType:&quot;&quot;,mediaType:&quot;&quot;,modeType:&quot;&quot;,modeTypeList:[],srcType:&quot;&quot;,width:&quot;&quot;,height:&quot;&quot;,volume:0,curPlayUrl:&quot;&quot;,srcList:{},pointList:[],autoplay:!1,defControls:!1,loop:!1,preload:!1,title:&quot;&quot;,duration:0,curIndex:-1,totCounts:-1,history:{},ipLimit:&quot;&quot;,liveEnName:&quot;&quot;,liveIcon:&quot;&quot;,liveId:&quot;&quot;,timeLimit:-1,liveUrl:&quot;&quot;,vidList:[],vidCurIndex:-1,isPauseAd:!1,pauseAdImg:&quot;&quot;,mediaAdPlatform:&quot;none&quot;,copyrightRst:{rst:!0,msg:&quot;&quot;},appid:&quot;&quot;,debug:!1,mainActor:&quot;&quot;,latestCount:&quot;&quot;,desc:&quot;&quot;,oriUrls:null,channeled:&quot;&quot;,fullscreenType:0,isRemHistory:!1,modeList:[&quot;nor&quot;,&quot;hig&quot;,&quot;sup&quot;,&quot;app&quot;]},l=function(a,b){j.extend(!0,this,k),j.merge(this,a),j.isUndefined(b)||(this.isMediaAdContent||n(b),&quot;live&quot;===a.mediaType?this._initHLS(b):this._initVOD(b))},m=function(a,b){var c=a.cateCode||a.cate_code||&quot;&quot;,d=[&quot;vid=&quot;+a.vid,&quot;&amp;uid=&quot;+e.get(&quot;SUV&quot;)||&quot;&quot;,&quot;&amp;plat=17&quot;,&quot;&amp;pt=&quot;+f.getUserPt(),&quot;&amp;prod=h5&quot;,&quot;&amp;pg=1&quot;,&quot;&amp;eye=0&quot;,&quot;&amp;cv=1.0.0&quot;,&quot;&amp;qd=&quot;+(j.isUndefined(i.channelNum)||&quot;0&quot;===i.channelNum?&quot;680&quot;:i.channelNum),&quot;&amp;src=&quot;+(j.isUndefined(i.channelSrc)||&quot;0&quot;===i.channelSrc?&quot;1105&quot;:i.channelSrc),&quot;&amp;cateCode=&quot;+c.split(&quot;;&quot;)[0]||&quot;&quot;].join(&quot;&quot;);return j.isUndefined(b)||(b+=(b.match(/\?/)?&quot;&amp;&quot;:&quot;?&quot;)+d),b},n=function(a){var b=a.urls;for(var c in b)if(&quot;downloadUrl&quot;===c){if(!j.isUndefined(b[c][0])&amp;&amp;&quot;&quot;!==b[c][0]){var d=b[c][0];b[c][0]=m(a,d)}}else for(var e in b[c])j.each(b[c][e],function(d,f){b[c][e][d]=m(a,f)})};l.prototype._initHLS=function(a){var b=this;j.merge(this,a),b.title=a.liveName||&quot;&quot;,b.srcType=/Android 2\./i.test(d.UA)?&quot;client&quot;:g.isSupportM3u8()?&quot;m3u8&quot;:&quot;client&quot;,b.liveId=a.liveId,b.curPlayUrl=a.liveUrl},l.prototype.getPlayList=function(){return this.srcList[this.modeType]||[]},l.prototype.getNextUrl=function(){var a=this.getPlayList(),b=this.curIndex+1,c=a[b];return j.isUndefined(c)?&quot;&quot;:c.url},l.prototype.getFirstUrl=function(){var a=this.getPlayList(),b=a[0];return j.isUndefined(b)?&quot;&quot;:b.url},l.prototype._initVOD=function(a){var b=this;b.poster=&quot;horizon&quot;===b.posterType?a.horHighPic||a.verHighPic||&quot;&quot;:a.verHighPic||a.horHighPic||&quot;&quot;;var c=a.totalDuration||a.total_duration||0;b.duration=parseInt(c,10),b.timeLimit&gt;-1&amp;&amp;b.timeLimit&lt;b.duration&amp;&amp;!b.isMediaAdContent&amp;&amp;(b.duration=b.timeLimit),b.title=a.tvname||a.videoName||a.video_name||&quot;&quot;,b.mainActor=a.main_actor||&quot;&quot;,b.latestCount=a.latest_video_count||&quot;&quot;,b.desc=a.video_desc||&quot;&quot;,j.isUndefined(a.srcType)?-1===b.timeLimit&amp;&amp;d.IsAndroid||!d.IsAndroid?h.isForceUseM3u8()?b.srcType=&quot;m3u8&quot;:h.isForceUseDownloadUrl()?(a.urls.mp4={},a.urls.mp4.nor=a.urls.downloadUrl):b.srcType=g.isSupportM3u8()?&quot;m3u8&quot;:&quot;mp4&quot;:b.srcType=&quot;mp4&quot;:b.srcType=a.srcType,j.isUndefined(a.urls)||(b.oriUrls=a.urls),!j.isUndefined(a.ep)&amp;&amp;a.ep instanceof Array&amp;&amp;j.each(a.ep,function(a,c){var d={};d.time=parseInt(c.k,10),d.desc=c.v,b.pointList.push(d)}),b.vid=a.vid,&quot;&quot;!==b.channeled?a.channeled=b.channeled:b.channeled=a.channeled||&quot;&quot;;var e=!1;if(!j.isUndefined(a.urls)){var f=a.urls[b.srcType],i=a.durations;for(var k in f)b.srcList[k]=[],f[k]instanceof Array&amp;&amp;j.each(f[k],function(c,d){var e={};e.url=d,e.duration=&quot;m3u8&quot;===b.srcType?a.totalDuration||a.total_duration||-1:parseInt(i[k][c]||-1,10),b.srcList[k].push(e)}),!e&amp;&amp;b.srcList[k].length&gt;0&amp;&amp;(e=!0,b.totCounts=b.srcList[k].length);var l=function(){var c={};c.url=&quot;&quot;,j.isUndefined(a.urls.downloadUrl)||(c.url=a.urls.downloadUrl[0]||&quot;&quot;),c.duration=parseInt(b.duration||-1,10),b.srcType=&quot;mp4&quot;,b.modeType=&quot;nor&quot;,b.srcList.nor=[c],b.totCounts=b.srcList.nor.length};e||&quot;client&quot;===b.srcType||l(),b.totCounts&gt;0&amp;&amp;(b.curIndex=0),b.isMediaAdContent||d.IsIphone||!d.IsUCBrowser||&quot;client&quot;===b.srcType||l(),/Android 2./i.test(d.UA)&amp;&amp;l(),b._initCurPlayUrlAndModeType()}},l.prototype._initCurPlayUrlAndModeType=function(){var a=this,b=a.getPlayList(),c=this.modeList;j.each(c,function(c,d){if(!j.isUndefined(a.srcList[d])&amp;&amp;a.srcList[d].length&gt;0){if(0===b.length)return a.modeType=d,!1;a.modeTypeList.push(d)}}),j(c).indexOf(&quot;app&quot;)&gt;-1&amp;&amp;this.modeTypeList.push(&quot;app&quot;),b=this.getPlayList(),b.length&gt;0&amp;&amp;(this.curPlayUrl=b[0].url)},c.exports=l}),svp.define(&quot;player.mediaPlayer&quot;,function(a,b,c){&quot;use strict&quot;;var d=svp.$,e=a(&quot;base.console&quot;),f=a(&quot;base.vars&quot;),g=function(a){this.videoTag=null,this.$video=null,this.cache=null,this.videoData=null,this.config=null,this.videoList=null,this.currentTime=0,this.duration=0,this._loadedDomFlag=!1,this._timeoutFlag=!1,this._getDataFlag=!1,this._playCheckFlag=!1,this._playCheckTime=6e3,this._init(a)};g.prototype.eventProcess={pause:[],ended:[],userEnded:[],error:[],play:[],playing:[],timeupdate:[]},g.prototype.eventList=[&quot;advended&quot;,&quot;loadedvideodata&quot;,&quot;loadstart&quot;,&quot;progress&quot;,&quot;suspend&quot;,&quot;abort&quot;,&quot;error&quot;,&quot;stalled&quot;,&quot;play&quot;,&quot;playing&quot;,&quot;pause&quot;,&quot;loadedmetadata&quot;,&quot;loadeddata&quot;,&quot;waiting&quot;,&quot;canplay&quot;,&quot;canplaythrough&quot;,&quot;seeking&quot;,&quot;seeked&quot;,&quot;timeupdate&quot;,&quot;ended&quot;,&quot;ratechange&quot;,&quot;durationchange&quot;,&quot;volumechange&quot;],g.prototype.getSrc=function(){return this.$video.attr(&quot;src&quot;)},g.prototype.setSrc=function(a){this.$video.attr(&quot;src&quot;,a)},g.prototype.getVolume=function(){return this.videoTag.volume},g.prototype.setVolume=function(a){d.isNumber(a)&amp;&amp;(a=0&gt;a?0:a,a=a&gt;1?1:a,e.log(&quot;音量:&quot;,a),this.videoTag.volume=a)},g.prototype.getPoster=function(){return this.cache.poster||&quot;&quot;},g.prototype.setPoster=function(a){this.changePoster(a)},g.prototype.getPreLoad=function(){return this.$video.attr(&quot;preload&quot;)},g.prototype.setPreLoad=function(a){this.$video.attr(&quot;preload&quot;,a)},g.prototype._init=function(){},g.prototype._addEvent=function(){},g.prototype._removeEvent=function(){},g.prototype._fireEvent=function(){},g.prototype._pause=function(){var a=this;this._onDomLoaded(function(){null===a.$video.attr(&quot;data-noSupport&quot;)&amp;&amp;a.videoTag.pause()})},g.prototype._play=function(){var a=this,b=function(){if(null===a.$video.attr(&quot;data-noSupport&quot;))try{if(!this._playCheckFlag&amp;&amp;this.config.autoplay){this._playCheckFlag=!0;var b=0,c=200,d=setInterval(function(){b+=c;var e=b&gt;=a._playCheckTime;(e||a.currentTime&gt;1)&amp;&amp;(e&amp;&amp;(a.pause(),a.$video.trigger(&quot;pause&quot;)),clearInterval(d))},c)}null!==a.$video.attr(&quot;preload&quot;)&amp;&amp;a.$video.removeAttr(&quot;preload&quot;),a.videoTag.play()}catch(e){a.$video.one(&quot;canplay&quot;,function(){a.videoTag.paused&amp;&amp;a.videoTag.play()})}};this._onDomLoaded(b)},g.prototype._playOrPause=function(){},g.prototype.pause=function(){var a=this;this._onDomLoaded(function(){a._playOrPause(&quot;pause&quot;)})},g.prototype.play=function(){var a=this;this._onDomLoaded(function(){a._playOrPause(&quot;play&quot;)})},g.prototype.seekTo=function(a){var b=this,c=function(a){try{b.videoTag.currentTime=a,b.videoTag.paused&amp;&amp;b.videoTag.play()}catch(c){b.$video.one(&quot;canplay&quot;,function(){b.videoTag.currentTime=a,b.videoTag.paused&amp;&amp;b.videoTag.play()})}},e=this.androidAdv;if(!d.isUndefined(e)&amp;&amp;!e.isMediaPlayed&amp;&amp;f.IsUCBrowser&amp;&amp;f.IsVivoPhone)return void c(a);var g=this.cache.srcList[this.cache.modeType];if(/Android\s4\./i.test(f.UA)&amp;&amp;!f.IsBaiduBrowser&amp;&amp;this._showLoading(),1===g.length)c(a);else{var h=0;d.each(g,function(d,e){if(h+e.duration&gt;a){var f=b.cache;if(d!==f.curIndex){f.curIndex=d;var g=e.url;f.curPlayUrl=g,b.setSrc(g)}return a-=h,setTimeout(function(){c(a)},300),!1}h+=e.duration})}},g.prototype.on=function(){},g.prototype.off=function(){},g.prototype.trigger=function(){},g.prototype.one=function(){},g.prototype.htmlTo=function(){},g.prototype.playByMode=function(){},g.prototype.updateMedia=function(){},g.prototype.changePoster=function(){},g.prototype._onDomLoaded=function(a){var b=this;if(this._loadedDomFlag)a.call(this);else var c=setInterval(function(){b._loadedDomFlag&amp;&amp;(clearInterval(c),a.call(b))},100)},c.exports=g}),svp.define(&quot;player.message&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;base.vars&quot;),d=a(&quot;player.mediaPlayer&quot;),e=function(a){var b=&quot;&quot;;return a.background&amp;&amp;(b+=&quot;background:&quot;+a.background+&quot;;&quot;),a.color&amp;&amp;(b+=&quot;color:&quot;+a.color+&quot;;&quot;),a.fontSize&amp;&amp;(b+=&quot;font-size:&quot;+a.fontSize+&quot;;&quot;),b},f=function(a,b,c){return&#x27;&lt;a href=&quot;&#x27;+(a.link?a.link:&quot;javascript:void(0);&quot;)+&#x27;&quot; class=&quot;msg_btn_&#x27;+c+&quot; msg_btn &quot;+(a.ClassName?a.ClassName:&quot;&quot;)+&#x27;&quot; style=&quot;&#x27;+b+&#x27;&quot;&gt;&#x27;+a.text+&quot;&lt;/a&gt;&quot;};d.prototype._hideMsg=function(){this.$main&amp;&amp;0!==this.$main.length||this._initDoms(),this.$main.children(&quot;.message&quot;).hide(),this.$main.find(&quot;.player_main&quot;).length&amp;&amp;this.$main.find(&quot;.player_main&quot;).show()},d.prototype._showMsg=function(a){this.$main&amp;&amp;0!==this.$main.length||this._initDoms(),this._pause(),this._hideLoading(),this.$main.find(&quot;.player_main&quot;).length&amp;&amp;this.$main.find(&quot;.player_main&quot;).hide();var d,g,h,i,j,k;d=h=j=k=&quot;&quot;,d=e(a),g=a.dom?a.dom:&#x27;&lt;div class=&quot;msg_cont&quot;&gt;&lt;span class=&quot;msg&quot;&gt;&#x27;+a.text+&quot;&lt;/span&gt;&lt;/div&gt;&quot;,a.btns&amp;&amp;(a.btns.btnA&amp;&amp;(j=e(a.btns.btnA),h+=f(a.btns.btnA,j,&quot;a&quot;)),a.btns.btnB&amp;&amp;(k=e(a.btns.btnB),h+=f(a.btns.btnB,k,&quot;b&quot;)),&quot;&quot;!==h&amp;&amp;(h=&#x27;&lt;div class=&quot;msg_btns&quot;&gt;&#x27;+h+&quot;&lt;/div&gt;&quot;)),i=&#x27;&lt;div class=&quot;message &#x27;+(a.className?a.className:&quot;&quot;)+&#x27;&quot; style=&quot;&#x27;+d+&#x27;&quot;&gt;&lt;div class=&quot;inner_msg&quot;&gt;&#x27;+g+h+&quot;&lt;/div&gt;&lt;/div&gt;&quot;,this.$main.children(&quot;.message&quot;).length?this.$main.find(&quot;.message&quot;).empty().append(&#x27;&lt;div class=&quot;inner_msg&quot;&gt;&#x27;+g+h+&quot;&lt;/div&gt;&quot;).attr(&quot;style&quot;,d).show():this.$main.append(i),a.btns&amp;&amp;(a.btns.btnA&amp;&amp;a.btns.btnA.callback&amp;&amp;b.isFunction(a.btns.btnA.callback)&amp;&amp;this.$main.find(&quot;.message .msg_btn_a&quot;).on(c.END_EVENT,function(){a.btns.btnA.callback.call(this)}),a.btns.btnB&amp;&amp;a.btns.btnB.callback&amp;&amp;b.isFunction(a.btns.btnB.callback)&amp;&amp;this.$main.find(&quot;.message .msg_btn_b&quot;).on(c.END_EVENT,function(){a.btns.btnB.callback.call(this)})),a.callback&amp;&amp;b.isFunction(a.callback)&amp;&amp;a.callback.call(this.$main.find(&quot;.message&quot;)[0])}}),svp.define(&quot;player.adv&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.vars&quot;),e=a(&quot;base.special&quot;),f=a(&quot;adv.android&quot;),g=a(&quot;adv.ios&quot;);c.prototype._initAdvFlag=!1,c.prototype._adUpdateFlag=!1,c.prototype.adInit=function(){var a=this.config;&quot;live&quot;!==a.mediaType&amp;&amp;(&quot;play_source&quot;!==a.dataType&amp;&amp;e.isAllowPlayAdv()&amp;&amp;((d.IsIphone||d.IsIpad)&amp;&amp;a.mediaAdPlatform.indexOf(&quot;ios&quot;)&gt;-1?this.adv=new g(this,a):d.IsAndroid&amp;&amp;a.mediaAdPlatform.indexOf(&quot;android&quot;)&gt;-1&amp;&amp;(this.adv=new f(this,a))),b.isUndefined(this.adv)||this.adv.addAdvertise(),b.isUndefined(this.adv)&amp;&amp;this.$video.attr(&quot;data-adover&quot;,&quot;true&quot;),(this.cache.autoplay||d.IsIphone||d.IsOldWindowsPhone||d.IsUCBrowser||d.IsQQBrowser||d.IsMIOne)&amp;&amp;(this._ctrlShowFlag=!0))}}),svp.define(&quot;player.playHistory&quot;,function(a,b,c){&quot;use strict&quot;;var d=a(&quot;base.store&quot;),e={param:{localHistoryName:&quot;sohu_video_history&quot;,maxSize:20,checkArr:[&quot;sid&quot;,&quot;vid&quot;,&quot;site&quot;,&quot;playTime&quot;,&quot;duration&quot;],paramArr:[&quot;sid&quot;,&quot;vid&quot;,&quot;site&quot;,&quot;cid&quot;,&quot;playTime&quot;,&quot;duration&quot;,&quot;sysTime&quot;,&quot;title&quot;]},model:{localDataStr:&quot;&quot;},view:{},ctrl:{}},f=e.param,g=e.model,h=(e.view,e.ctrl);g.historyCheck=function(a){var b=!0;return $.each(f.checkArr,function(c,d){return&quot;undefiend&quot;==typeof a[d]?(b=!1,!1):void 0}),b},g.objToStr=function(a){var b=[],c=!1;try{var d=parseInt(a.duration,10),e=parseInt(a.playTime,10);e/d&gt;.97&amp;&amp;(c=!0)}catch(g){}return c?&quot;finished&quot;:(a.sysTime=Date.now(),$.each(f.paramArr,function(c,d){if(&quot;playTime&quot;===d)try{a[d]=parseInt(a[d],10)}catch(e){}a[d]=a[d]?a[d]:&quot;&quot;,b.push(encodeURIComponent(a[d]))}),b.join(&quot;,&quot;))},g.strToObj=function(a){var b=null;if(&quot;string&quot;==typeof a&amp;&amp;&quot;null&quot;!==a&amp;&amp;&quot;&quot;!==a){var c=a.split(&quot;,&quot;);b={},$.each(f.paramArr,function(a,d){b[d]=&quot;playTime&quot;===d||&quot;duration&quot;===d||&quot;sysTime&quot;===d||&quot;flag&quot;===d||&quot;sid&quot;===d?parseInt(c[a],10):decodeURIComponent(c[a])})}return b},g.strToArr=function(a){var b=[];if(&quot;string&quot;==typeof a&amp;&amp;&quot;&quot;!==a&amp;&amp;&quot;null&quot;!==a){0===a.indexOf(&quot;|&quot;)&amp;&amp;(a=a.substr(1));var c=a.split(&quot;|&quot;);$.each(c,function(a,c){b.push(g.strToObj(c))})}return b},h.setHistory=function(a){if(g.historyCheck(a)){var b=g.objToStr(a);&quot;&quot;===g.localDataStr&amp;&amp;(g.localDataStr=d.get(f.localHistoryName)||&quot;&quot;);var c=&quot;&quot;!==g.localDataStr?g.localDataStr.split(&quot;|&quot;):[],e=&quot;,&quot;+a.vid+&quot;,&quot;+a.site+&quot;,&quot;;if(&quot;finished&quot;!==b&amp;&amp;-1===g.localDataStr.indexOf(e))c.unshift(b);else{var h=[];&quot;finished&quot;!==b&amp;&amp;h.push(b),$.each(c,function(a,b){-1===b.indexOf(e)&amp;&amp;h.push(b)}),c=h}c.length&gt;f.maxSize&amp;&amp;(c.length=f.maxSize),g.localDataStr=c.join(&quot;|&quot;),d.set(f.localHistoryName,g.localDataStr)}},h.getHistory=function(a){var b=[],c=g.localDataStr&amp;&amp;&quot;&quot;!==g.localDataStr?g.localDataStr:d.get(f.localHistoryName);if(c&amp;&amp;&quot;undefined&quot;!=typeof a){if(&quot;undefined&quot;!=typeof a.vid&amp;&amp;&quot;undefined&quot;!=typeof a.site){var e=new RegExp(&quot;(^|\\|)\\d+,&quot;+a.vid+&quot;,&quot;+a.site+&quot;(,[\\w\\.\\W]*){6}&quot;,&quot;ig&quot;),h=c.match(e)+&quot;&quot;;b=g.strToObj(h),b=null===b?[]:[b]}else if(&quot;undefined&quot;!=typeof a.sid){var i=g.strToArr(c);$.each(i,function(c,d){d.sid+&quot;&quot;==a.sid+&quot;&quot;&amp;&amp;b.push(d)}),(&quot;undefiend&quot;==typeof a.type||0===a.type||1!==a.type)&amp;&amp;(b.length=1)}}else b=g.strToArr(c);return b},window.SohutvJSBridge=window.SohutvJSBridge||{},window.SohutvJSBridge.setHistory=h.setHistory,window.SohutvJSBridge.getHistory=h.getHistory,c.exports={setHistory:h.setHistory,getHistory:h.getHistory}}),svp.define(&quot;player.poster&quot;,function(a){&quot;use strict&quot;;var b=a(&quot;player.mediaPlayer&quot;);b.prototype.hidePoster=function(){this.$posterCon.length&gt;0&amp;&amp;this.$posterCon.addClass(&quot;hidden&quot;)},b.prototype.showPoster=function(){this.$posterCon.length&gt;0&amp;&amp;this.$posterCon.removeClass(&quot;hidden&quot;)},b.prototype.changePoster=function(a){a&amp;&amp;a.url&amp;&amp;this.$posterCon.length&gt;0&amp;&amp;this.$posterCon.css({&quot;background-image&quot;:&quot;url(&quot;+a.url+&quot;);&quot;})}}),svp.define(&quot;player.settings&quot;,function(a,b,c){&quot;use strict&quot;;var d=svp.$,e=a(&quot;base.special&quot;),f={};f.PLAY_MODE={nor:&quot;流畅&quot;,hig:&quot;高清&quot;,sup:&quot;超清&quot;,ori:&quot;原画&quot;,app:&quot;超清app&quot;};var g={data:null,mainId:&quot;&quot;,playerId:&quot;&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,pWidth:&quot;&quot;,pHeight:&quot;&quot;,volume:1,elemId:&quot;videoTagId_&quot;+Date.now(),dataType:&quot;&quot;,autoplay:!0,defControls:!1,loop:!1,preload:!1,mediaType:&quot;vod&quot;,modeType:&quot;nor&quot;,posterType:&quot;horizon&quot;,timeLimit:-1,isPauseAd:!1,pauseAdImg:&quot;&quot;,mediaAdPlatform:&quot;none&quot;,isCopyrightCheck:!0,adClose:&quot;0&quot;,appid:&quot;tv&quot;,debug:!1,channeled:&quot;&quot;,fullscreenType:0,isRemHistory:!1,modeList:[&quot;nor&quot;,&quot;hig&quot;,&quot;sup&quot;,&quot;ori&quot;,&quot;app&quot;],isShowRecommend:!1};f.initConfig=function(a){var b=d.extend(!0,{},g,a);return null!==b.data&amp;&amp;(b.data=d.extend(!0,{},b.data)),&quot;&quot;===b.mainId&amp;&amp;(d.isUndefined(svp.mainId)&amp;&amp;(svp.mainId=1),b.mainId=&quot;svp_main_&quot;+svp.mainId,svp.mainId++),e.isForbidAutoplay()&amp;&amp;(b.autoplay=!1),b},c.exports=f}),svp.define(&quot;player.showRecommend&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;base.vars&quot;),d=a(&quot;base.console&quot;),e=a(&quot;player.mediaPlayer&quot;),f=a(&quot;data.recommend&quot;),g=a(&quot;base.slide&quot;),h=function(a){var b=[],c=[];b.push(&#x27;&lt;div class=&quot;svp_recommend_wrap player_recommend_wrap&quot;&gt;&#x27;),b.push(&#x27;&lt;div class=&quot;about_recommend&quot;&gt;&#x27;),b.push(&#x27;&lt;div class=&quot;title&quot;&gt;相关推荐&lt;/div&gt;&#x27;),b.push(&#x27;&lt;div class=&quot;right_btn&quot;&gt;&#x27;),b.push(&#x27;&lt;span class=&quot;svp_replay replay btns&quot;&gt;重新播放&lt;/span&gt;&#x27;),b.push(&#x27;&lt;a  class=&quot;player_recommend_more btns&quot; href=&quot;http://m.tv.sohu.com&quot;&gt;更多&lt;/a&gt;&#x27;),b.push(&quot;&lt;/div&gt;&lt;/div&gt;&quot;),b.push(&#x27;&lt;div class=&quot;recommend_videos_wrap&quot;&gt;&#x27;),b.push(&#x27;&lt;div class=&quot;svp_recommend_videos recommend_videos&quot;&gt;&#x27;),c.push(&#x27;&lt;ul class=&quot;svp_page_point page_point&quot;&gt;&#x27;);for(var d=0;d&lt;a.length;d++){d%2===0&amp;&amp;(c.push(&quot;&lt;li&gt;&quot;),b.push(&#x27;&lt;ul class=&quot;svp_video_list video_list&quot;&gt;&#x27;)),b.push(&#x27;&lt;li class=&quot;svp_item recommend_videos_item&quot;&gt;&#x27;);var e=a[d].url_html5||&quot;http://m.tv.sohu.com/v&quot;+(a[d].vid||0)+&quot;.shtml&quot;;b.push(&#x27;&lt;a href=&quot;&#x27;+(a[d].url_html5||e)+&#x27;&quot; data-href=&quot;&#x27;+(a[d].url_html5||&quot;&quot;)+&#x27;&quot; class=&quot;svp_link item_link&quot;&gt;&#x27;),b.push(&#x27;&lt;b style=&quot;background-image: url(&#x27;+(a[d].hor_big_pic||&quot;&quot;)+&#x27;);background-size:cover;&quot;&gt;&lt;/b&gt;&#x27;),b.push(&#x27;&lt;div class=&quot;playend_recommend_vtilte&quot;&gt;&#x27;+(a[d].album_name||&quot;&quot;)+&quot;&lt;/div&gt;&quot;),b.push(&quot;&lt;/a&gt;&lt;/li&gt;&quot;),d%2===1&amp;&amp;b.push(&quot;&lt;/ul&gt;&quot;)}return c.push(&quot;&lt;/ul&gt;&quot;),b.push(&quot;&lt;/div&gt;&quot;),b.push(&quot;&lt;/div&gt;&quot;),b.push(c.join(&quot;&quot;)),b.push(&quot;&lt;/div&gt;&quot;),b.push(&quot;&lt;/div&gt;&quot;),b.join(&quot;&quot;)};e.prototype.showRecommend=function(){var a=this;return d.log(&quot;showRecommend&quot;),d.log(&quot;_this.lastVid&quot;+a.lastVid),d.log(&quot;_this.videoData.vid&quot;+a.videoData.vid),b(&quot;.svp_recommend_wrap&quot;).length&gt;0&amp;&amp;a.lastVid===a.videoData.vid?void a.$main.addClass(&quot;recommend_show&quot;):void f.getData(&quot;recommend&quot;,a.videoData,function(d){if(null!==d&amp;&amp;&quot;&quot;!==d&amp;&amp;d.videos&amp;&amp;d.videos.length&gt;0){d=d.videos,b(&quot;.svp_recommend_wrap&quot;).remove();var e=h(d);a.$main.append(e).addClass(&quot;recommend_show&quot;),a.lastVid=a.videoData.vid,a.$rePlay=a.$main.find(&quot;.svp_replay&quot;),a.$rePlay.click(function(){a._sendVVFlag=!1,a._sendRealVVFlag=!1,a._sendStartFlag=!1,a._sendEndFlag=!1,a._playByHistoryFlag=!1,a._timeoutFlag=!1,c.IsIphone&amp;&amp;/^[0-7]\./i.test(c.OsVersion)?a.seekTo(0):a.updateMedia(a.videoData,!0),a.$main.removeClass(&quot;recommend_show&quot;),a._showRecommendFlag=!0}),g.Scroll({scrollClass:&quot;svp_recommend_videos&quot;,moveSpeed:200,loop:!0,auto:!1})}})},e.prototype.hideRecommend=function(){this.$main.removeClass(&quot;recommend_show&quot;)}}),svp.define(&quot;player.update&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;base.vars&quot;),e=a(&quot;trace.video&quot;),f=a(&quot;player.dataService&quot;),g=a(&quot;player.loadCacheData&quot;),h=a(&quot;base.special&quot;),i=a(&quot;player.html5UI&quot;),j=a(&quot;player.liveUI&quot;),k=a(&quot;player.errorTypes&quot;),l=a(&quot;data.appDownload&quot;),m=a(&quot;base.console&quot;),n=a(&quot;player.settings&quot;),o=a(&quot;base.action&quot;),p=a(&quot;trace.click&quot;),q=function(a){var c=&quot;error&quot;;if(!b.isUndefined(a)&amp;&amp;null!==a)if(b.isUndefined(a.urls)||b.isUndefined(a.durations))b.isUndefined(a.vid)&amp;&amp;b.isUndefined(a.liveId)?b.isUndefined(a.src)||(c=&quot;source&quot;):c=&quot;partial&quot;;else try{var e=d.IsIphone||d.IsQQBrowser||h.isForceUseM3u8()?&quot;m3u8&quot;:&quot;mp4&quot;;c=&quot;whole&quot;;for(var f in a.urls[e])a.durations[f].length!==a.urls[e][f].length&amp;&amp;(c=&quot;partial&quot;)}catch(g){c=&quot;partial&quot;}return c},r=function(a){var c=a.cache;!b.isUndefined(a.adv)&amp;&amp;b.isFunction(a.adv.hideMediaView)&amp;&amp;a.adv.hideMediaView(),a.$title.html(c.title),document.title=c.title,a.$ctrlCurTime.html(b.formatSeconds(0)),a.$ctrlDuration.html(b.formatSeconds(c.duration)),a.$ctrlCurPlayedBar.css({width:0}),a.changePoster({url:c.poster})},s=function(a,c){if(a.trigger(&quot;loadedvideodata&quot;),&quot;videoDataList&quot;===a.videoList.type){var f=a.videoList.videoDataList[a.videoList.curIndex];c.channeled=f.channeled||&quot;1212120001&quot;,c.timeLimit=f.timeLimit||&quot;0&quot;}window.videoData=c,l.getChannelInfo(null,function(f){if(a.config.timeLimit&lt;=0&amp;&amp;!d.IsWeixinBrowser&amp;&amp;(c.timeLimit&gt;0&amp;&amp;(a.config.timeLimit=c.timeLimit),!b.isUndefined(c.cid)&amp;&amp;!b.isUndefined(f.cid)))try{var h=c.cid,n=b(f.cid.split(&quot;,&quot;));n.indexOf(h+&quot;&quot;)&gt;-1&amp;&amp;f.timeLimit&gt;0&amp;&amp;(a.config.timeLimit=f.timeLimit)}catch(q){}if(a._firstLoadFlag&amp;&amp;&quot;0&quot;===f.startapp&amp;&amp;!d.IsWeixinBrowser&amp;&amp;(a.config.autoplay=!1),!b.isUndefined(f.quality)){var s=(f.quality+&quot;&quot;).split(&quot;,&quot;);s.length&gt;0&amp;&amp;(a.config.modeList=s)}if(b.isUndefined(f.isClosed)||(a.config.adClose=f.isClosed+&quot;&quot;),a.cache=new g(a.config,c),a.videoData=b.extend(!0,{},c),a._firstLoadFlag){if(a._adUpdateFlag=!1,a.$player.append(&quot;live&quot;===a.config.mediaType?j.makeVideoTmpl(a.cache):i.makeVideoTmpl(a.cache)),m.log(&quot;加载dom完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadDomStartTime)/1e3),a._initDoms(),&quot;noSupport&quot;===a.$video.attr(&quot;data-nosupport&quot;)){var t=&quot;live&quot;===a.config.mediaType?k.SUPPORT[305]:k.SUPPORT[300];return void a._showMsg({text:t,btns:{btnA:{text:&quot;下载搜狐视频客户端&quot;,callback:function(){l.gotoDownload()}}}})}a._loadedDomFlag=!0,a._initEvent(),a._initControls(),a._initException(),a._autoNextVideoService(),a.$loadingDesc.oriHide(),a.$video.length&gt;0&amp;&amp;(a.videoTag.volume=a.config.volume,a.$ctrlDuration.html(b.formatSeconds(a.cache.duration)))}else b(&quot;body&quot;).trigger(&quot;player:updateMedia&quot;),r(a),a._adUpdateFlag=!0;a.setSrc(a.cache.curPlayUrl),a.duration=a.cache.duration,a.currentTime=0,a._hideLoading(),a.cache.autoplay?(a.$midPlay.oriHide(),a._sendVVFlag||(m.log(&quot;统计: vv&quot;),e.vv(),a._sendVVFlag=!0),a._playOrPause(&quot;play&quot;)):(a._playOrPause(&quot;pause&quot;),a._hideMainCtrl(),a._showMidPlayBtn(),a.showPoster(),(d.IsUCBrowser||d.IsQQBrowser&amp;&amp;!/QQBrowser\/4\.2/i.test(d.UA))&amp;&amp;a.$video.oriHide()),a._firstLoadFlag&amp;&amp;(b.isUndefined(o.URLGlobalParams.player)||(a._fullOrShrink(&quot;fullScreen&quot;),a._playOrPause(&quot;play&quot;))),m.log(&quot;播放器加载时间:&quot;+(Date.now()-svp.debug.playerLoadStartTime)/1e3+&quot;秒&quot;),a._sendPlayDisplayCompleteFlag||(m.log(&quot;发送行为统计点:(play_display_complete)&quot;),p.pingback(null,&quot;play_display_complete&quot;),a._sendPlayDisplayCompleteFlag=!0)})};c.prototype.updateMedia=function(a,c){var g=this;if(!b.isUndefined(a)){var h=q(a);if(&quot;error&quot;!==h){if(null!==g.videoData&amp;&amp;(g.hideRecommend(),g.config.isShowRecommend&amp;&amp;&quot;source&quot;===h&amp;&amp;g.videoData.video_src.indexOf(a.src)&gt;-1))return void(g._showRecommendFlag=!0);g._showRecommendFlag=!1,g._firstLoadFlag||(svp.debug.playerLoadStartTime=Date.now(),this._sendRealVVFlag&amp;&amp;!this._sendEndFlag&amp;&amp;(m.log(&quot;统计: ended&quot;),e.ended(this.currentTime,this._bufferCount),this._sendEndFlag=!0),b.isUndefined(this.videoData)||(this.config.data=this.videoData,this.config.dataType=&quot;video_data&quot;,this.config.isMediaAdContent=!1,a.channeled&amp;&amp;&quot;default&quot;!==a.channeled&amp;&amp;(this.config.channeled=a.channeled)),this._sendVVFlag=!1,this._sendRealVVFlag=!1,this._sendStartFlag=!1,this._sendEndFlag=!1,this._playByHistoryFlag=!1,this._timeoutFlag=!1,b.isUndefined(this.config)&amp;&amp;(this.config=n.initConfig({})),a=b.extend(!0,{},a),&quot;undefined&quot;!=typeof c&amp;&amp;(this.config.autoplay=c),this._playOrPause(&quot;pause&quot;),d.IsBaiduBrowser||this._showLoading()),&quot;partial&quot;===h||&quot;source&quot;===h?(this._getDataFlag=!1,setTimeout(function(){g._getDataFlag||(g._timeoutFlag=!0,g._showMsg({text:k.REQUEST[400],btns:{btnA:{text:&quot;刷新&quot;,callback:function(){g._timeoutFlag=!1,g._hideMsg(),g.updateMedia(a,c)}}}}))},this._dataTimeout),svp.debug.playerLoadMediaDataStartTime=Date.now(),f.auto(a,function(d){m.log(&quot;视频数据获取完成, 耗时---&gt;&quot;+(Date.now()-svp.debug.playerLoadMediaDataStartTime)/1e3),g._timeoutFlag||(g._getDataFlag=!0,&quot;200&quot;!==d.code||b.isUndefined(d.data)?g._showMsg(&quot;&quot;===d.code||b.isUndefined(d.data)?{text:k.PROCESS[201],btns:{btnA:{text:&quot;刷新&quot;,callback:function(){g.updateMedia(a,c)}}}}:{text:d.msg}):s(g,d.data))})):s(g,a)}else g._showMsg({text:k.PROCESS[202]})}}}),svp.define(&quot;player.videoList&quot;,function(a){&quot;use strict&quot;;var b=svp.$,c=a(&quot;player.mediaPlayer&quot;),d=a(&quot;player.errorTypes&quot;);c.prototype._videoList=function(a){if(b.isUndefined(a))return this._showMsg({text:d.PROCESS[202]}),!1;var c={};return!b.isUndefined(a.vidList)&amp;&amp;b.isArray(a.vidList)?(c.vidList=a.vidList,c.site=a.site||&quot;1&quot;,c.curIndex=0,c.type=&quot;vidList&quot;):!b.isUndefined(a.videoDataList)&amp;&amp;b.isArray(a.videoDataList)&amp;&amp;(c.videoDataList=a.videoDataList,c.curIndex=0,c.type=&quot;videoDataList&quot;),c}});
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
